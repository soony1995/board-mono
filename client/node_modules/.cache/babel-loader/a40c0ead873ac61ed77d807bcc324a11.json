{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst ConstDependency = require(\"./dependencies/ConstDependency\");\nconst ParserHelpers = require(\"./ParserHelpers\");\nconst NullFactory = require(\"./NullFactory\");\n\n/* eslint-disable camelcase */\nconst REPLACEMENTS = {\n  __webpack_require__: \"__webpack_require__\",\n  __webpack_public_path__: \"__webpack_require__.p\",\n  __webpack_modules__: \"__webpack_require__.m\",\n  __webpack_chunk_load__: \"__webpack_require__.e\",\n  __non_webpack_require__: \"require\",\n  __webpack_nonce__: \"__webpack_require__.nc\",\n  \"require.onError\": \"__webpack_require__.oe\"\n};\nconst NO_WEBPACK_REQUIRE = {\n  __non_webpack_require__: true\n};\nconst REPLACEMENT_TYPES = {\n  __webpack_public_path__: \"string\",\n  __webpack_require__: \"function\",\n  __webpack_modules__: \"object\",\n  __webpack_chunk_load__: \"function\",\n  __webpack_nonce__: \"string\"\n};\n/* eslint-enable camelcase */\n\nclass APIPlugin {\n  apply(compiler) {\n    compiler.hooks.compilation.tap(\"APIPlugin\", (compilation, {\n      normalModuleFactory\n    }) => {\n      compilation.dependencyFactories.set(ConstDependency, new NullFactory());\n      compilation.dependencyTemplates.set(ConstDependency, new ConstDependency.Template());\n      const handler = parser => {\n        Object.keys(REPLACEMENTS).forEach(key => {\n          parser.hooks.expression.for(key).tap(\"APIPlugin\", NO_WEBPACK_REQUIRE[key] ? ParserHelpers.toConstantDependency(parser, REPLACEMENTS[key]) : ParserHelpers.toConstantDependencyWithWebpackRequire(parser, REPLACEMENTS[key]));\n          const type = REPLACEMENT_TYPES[key];\n          if (type) {\n            parser.hooks.evaluateTypeof.for(key).tap(\"APIPlugin\", ParserHelpers.evaluateToString(type));\n          }\n        });\n      };\n      normalModuleFactory.hooks.parser.for(\"javascript/auto\").tap(\"APIPlugin\", handler);\n      normalModuleFactory.hooks.parser.for(\"javascript/dynamic\").tap(\"APIPlugin\", handler);\n      normalModuleFactory.hooks.parser.for(\"javascript/esm\").tap(\"APIPlugin\", handler);\n    });\n  }\n}\nmodule.exports = APIPlugin;","map":{"version":3,"names":["ConstDependency","require","ParserHelpers","NullFactory","REPLACEMENTS","__webpack_require__","__webpack_public_path__","__webpack_modules__","__webpack_chunk_load__","__non_webpack_require__","__webpack_nonce__","NO_WEBPACK_REQUIRE","REPLACEMENT_TYPES","APIPlugin","apply","compiler","hooks","compilation","tap","normalModuleFactory","dependencyFactories","set","dependencyTemplates","Template","handler","parser","Object","keys","forEach","key","expression","for","toConstantDependency","toConstantDependencyWithWebpackRequire","type","evaluateTypeof","evaluateToString","module","exports"],"sources":["/home/soon/bulletin-board/node_modules/webpack/lib/APIPlugin.js"],"sourcesContent":["/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst ConstDependency = require(\"./dependencies/ConstDependency\");\nconst ParserHelpers = require(\"./ParserHelpers\");\n\nconst NullFactory = require(\"./NullFactory\");\n\n/* eslint-disable camelcase */\nconst REPLACEMENTS = {\n\t__webpack_require__: \"__webpack_require__\",\n\t__webpack_public_path__: \"__webpack_require__.p\",\n\t__webpack_modules__: \"__webpack_require__.m\",\n\t__webpack_chunk_load__: \"__webpack_require__.e\",\n\t__non_webpack_require__: \"require\",\n\t__webpack_nonce__: \"__webpack_require__.nc\",\n\t\"require.onError\": \"__webpack_require__.oe\"\n};\nconst NO_WEBPACK_REQUIRE = {\n\t__non_webpack_require__: true\n};\nconst REPLACEMENT_TYPES = {\n\t__webpack_public_path__: \"string\",\n\t__webpack_require__: \"function\",\n\t__webpack_modules__: \"object\",\n\t__webpack_chunk_load__: \"function\",\n\t__webpack_nonce__: \"string\"\n};\n/* eslint-enable camelcase */\n\nclass APIPlugin {\n\tapply(compiler) {\n\t\tcompiler.hooks.compilation.tap(\n\t\t\t\"APIPlugin\",\n\t\t\t(compilation, { normalModuleFactory }) => {\n\t\t\t\tcompilation.dependencyFactories.set(ConstDependency, new NullFactory());\n\t\t\t\tcompilation.dependencyTemplates.set(\n\t\t\t\t\tConstDependency,\n\t\t\t\t\tnew ConstDependency.Template()\n\t\t\t\t);\n\n\t\t\t\tconst handler = parser => {\n\t\t\t\t\tObject.keys(REPLACEMENTS).forEach(key => {\n\t\t\t\t\t\tparser.hooks.expression\n\t\t\t\t\t\t\t.for(key)\n\t\t\t\t\t\t\t.tap(\n\t\t\t\t\t\t\t\t\"APIPlugin\",\n\t\t\t\t\t\t\t\tNO_WEBPACK_REQUIRE[key]\n\t\t\t\t\t\t\t\t\t? ParserHelpers.toConstantDependency(\n\t\t\t\t\t\t\t\t\t\t\tparser,\n\t\t\t\t\t\t\t\t\t\t\tREPLACEMENTS[key]\n\t\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t\t: ParserHelpers.toConstantDependencyWithWebpackRequire(\n\t\t\t\t\t\t\t\t\t\t\tparser,\n\t\t\t\t\t\t\t\t\t\t\tREPLACEMENTS[key]\n\t\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\tconst type = REPLACEMENT_TYPES[key];\n\t\t\t\t\t\tif (type) {\n\t\t\t\t\t\t\tparser.hooks.evaluateTypeof\n\t\t\t\t\t\t\t\t.for(key)\n\t\t\t\t\t\t\t\t.tap(\"APIPlugin\", ParserHelpers.evaluateToString(type));\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t};\n\n\t\t\t\tnormalModuleFactory.hooks.parser\n\t\t\t\t\t.for(\"javascript/auto\")\n\t\t\t\t\t.tap(\"APIPlugin\", handler);\n\t\t\t\tnormalModuleFactory.hooks.parser\n\t\t\t\t\t.for(\"javascript/dynamic\")\n\t\t\t\t\t.tap(\"APIPlugin\", handler);\n\t\t\t\tnormalModuleFactory.hooks.parser\n\t\t\t\t\t.for(\"javascript/esm\")\n\t\t\t\t\t.tap(\"APIPlugin\", handler);\n\t\t\t}\n\t\t);\n\t}\n}\n\nmodule.exports = APIPlugin;\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,YAAY;;AAEZ,MAAMA,eAAe,GAAGC,OAAO,CAAC,gCAAgC,CAAC;AACjE,MAAMC,aAAa,GAAGD,OAAO,CAAC,iBAAiB,CAAC;AAEhD,MAAME,WAAW,GAAGF,OAAO,CAAC,eAAe,CAAC;;AAE5C;AACA,MAAMG,YAAY,GAAG;EACpBC,mBAAmB,EAAE,qBAAqB;EAC1CC,uBAAuB,EAAE,uBAAuB;EAChDC,mBAAmB,EAAE,uBAAuB;EAC5CC,sBAAsB,EAAE,uBAAuB;EAC/CC,uBAAuB,EAAE,SAAS;EAClCC,iBAAiB,EAAE,wBAAwB;EAC3C,iBAAiB,EAAE;AACpB,CAAC;AACD,MAAMC,kBAAkB,GAAG;EAC1BF,uBAAuB,EAAE;AAC1B,CAAC;AACD,MAAMG,iBAAiB,GAAG;EACzBN,uBAAuB,EAAE,QAAQ;EACjCD,mBAAmB,EAAE,UAAU;EAC/BE,mBAAmB,EAAE,QAAQ;EAC7BC,sBAAsB,EAAE,UAAU;EAClCE,iBAAiB,EAAE;AACpB,CAAC;AACD;;AAEA,MAAMG,SAAS,CAAC;EACfC,KAAKA,CAACC,QAAQ,EAAE;IACfA,QAAQ,CAACC,KAAK,CAACC,WAAW,CAACC,GAAG,CAC7B,WAAW,EACX,CAACD,WAAW,EAAE;MAAEE;IAAoB,CAAC,KAAK;MACzCF,WAAW,CAACG,mBAAmB,CAACC,GAAG,CAACrB,eAAe,EAAE,IAAIG,WAAW,CAAC,CAAC,CAAC;MACvEc,WAAW,CAACK,mBAAmB,CAACD,GAAG,CAClCrB,eAAe,EACf,IAAIA,eAAe,CAACuB,QAAQ,CAAC,CAC9B,CAAC;MAED,MAAMC,OAAO,GAAGC,MAAM,IAAI;QACzBC,MAAM,CAACC,IAAI,CAACvB,YAAY,CAAC,CAACwB,OAAO,CAACC,GAAG,IAAI;UACxCJ,MAAM,CAACT,KAAK,CAACc,UAAU,CACrBC,GAAG,CAACF,GAAG,CAAC,CACRX,GAAG,CACH,WAAW,EACXP,kBAAkB,CAACkB,GAAG,CAAC,GACpB3B,aAAa,CAAC8B,oBAAoB,CAClCP,MAAM,EACNrB,YAAY,CAACyB,GAAG,CAChB,CAAC,GACD3B,aAAa,CAAC+B,sCAAsC,CACpDR,MAAM,EACNrB,YAAY,CAACyB,GAAG,CAChB,CACJ,CAAC;UACF,MAAMK,IAAI,GAAGtB,iBAAiB,CAACiB,GAAG,CAAC;UACnC,IAAIK,IAAI,EAAE;YACTT,MAAM,CAACT,KAAK,CAACmB,cAAc,CACzBJ,GAAG,CAACF,GAAG,CAAC,CACRX,GAAG,CAAC,WAAW,EAAEhB,aAAa,CAACkC,gBAAgB,CAACF,IAAI,CAAC,CAAC;UACzD;QACD,CAAC,CAAC;MACH,CAAC;MAEDf,mBAAmB,CAACH,KAAK,CAACS,MAAM,CAC9BM,GAAG,CAAC,iBAAiB,CAAC,CACtBb,GAAG,CAAC,WAAW,EAAEM,OAAO,CAAC;MAC3BL,mBAAmB,CAACH,KAAK,CAACS,MAAM,CAC9BM,GAAG,CAAC,oBAAoB,CAAC,CACzBb,GAAG,CAAC,WAAW,EAAEM,OAAO,CAAC;MAC3BL,mBAAmB,CAACH,KAAK,CAACS,MAAM,CAC9BM,GAAG,CAAC,gBAAgB,CAAC,CACrBb,GAAG,CAAC,WAAW,EAAEM,OAAO,CAAC;IAC5B,CACD,CAAC;EACF;AACD;AAEAa,MAAM,CAACC,OAAO,GAAGzB,SAAS","ignoreList":[]},"metadata":{},"sourceType":"script"}