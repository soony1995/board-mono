{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst ParserHelpers = require(\"./ParserHelpers\");\nconst ConstDependency = require(\"./dependencies/ConstDependency\");\nconst NullFactory = require(\"./NullFactory\");\nclass ProvidePlugin {\n  constructor(definitions) {\n    this.definitions = definitions;\n  }\n  apply(compiler) {\n    const definitions = this.definitions;\n    compiler.hooks.compilation.tap(\"ProvidePlugin\", (compilation, {\n      normalModuleFactory\n    }) => {\n      compilation.dependencyFactories.set(ConstDependency, new NullFactory());\n      compilation.dependencyTemplates.set(ConstDependency, new ConstDependency.Template());\n      const handler = (parser, parserOptions) => {\n        Object.keys(definitions).forEach(name => {\n          var request = [].concat(definitions[name]);\n          var splittedName = name.split(\".\");\n          if (splittedName.length > 0) {\n            splittedName.slice(1).forEach((_, i) => {\n              const name = splittedName.slice(0, i + 1).join(\".\");\n              parser.hooks.canRename.for(name).tap(\"ProvidePlugin\", ParserHelpers.approve);\n            });\n          }\n          parser.hooks.expression.for(name).tap(\"ProvidePlugin\", expr => {\n            let nameIdentifier = name;\n            const scopedName = name.includes(\".\");\n            let expression = `require(${JSON.stringify(request[0])})`;\n            if (scopedName) {\n              nameIdentifier = `__webpack_provided_${name.replace(/\\./g, \"_dot_\")}`;\n            }\n            if (request.length > 1) {\n              expression += request.slice(1).map(r => `[${JSON.stringify(r)}]`).join(\"\");\n            }\n            if (!ParserHelpers.addParsedVariableToModule(parser, nameIdentifier, expression)) {\n              return false;\n            }\n            if (scopedName) {\n              ParserHelpers.toConstantDependency(parser, nameIdentifier)(expr);\n            }\n            return true;\n          });\n        });\n      };\n      normalModuleFactory.hooks.parser.for(\"javascript/auto\").tap(\"ProvidePlugin\", handler);\n      normalModuleFactory.hooks.parser.for(\"javascript/dynamic\").tap(\"ProvidePlugin\", handler);\n\n      // Disable ProvidePlugin for javascript/esm, see https://github.com/webpack/webpack/issues/7032\n    });\n  }\n}\nmodule.exports = ProvidePlugin;","map":{"version":3,"names":["ParserHelpers","require","ConstDependency","NullFactory","ProvidePlugin","constructor","definitions","apply","compiler","hooks","compilation","tap","normalModuleFactory","dependencyFactories","set","dependencyTemplates","Template","handler","parser","parserOptions","Object","keys","forEach","name","request","concat","splittedName","split","length","slice","_","i","join","canRename","for","approve","expression","expr","nameIdentifier","scopedName","includes","JSON","stringify","replace","map","r","addParsedVariableToModule","toConstantDependency","module","exports"],"sources":["/home/soon/bulletin-board/node_modules/webpack/lib/ProvidePlugin.js"],"sourcesContent":["/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst ParserHelpers = require(\"./ParserHelpers\");\nconst ConstDependency = require(\"./dependencies/ConstDependency\");\n\nconst NullFactory = require(\"./NullFactory\");\n\nclass ProvidePlugin {\n\tconstructor(definitions) {\n\t\tthis.definitions = definitions;\n\t}\n\n\tapply(compiler) {\n\t\tconst definitions = this.definitions;\n\t\tcompiler.hooks.compilation.tap(\n\t\t\t\"ProvidePlugin\",\n\t\t\t(compilation, { normalModuleFactory }) => {\n\t\t\t\tcompilation.dependencyFactories.set(ConstDependency, new NullFactory());\n\t\t\t\tcompilation.dependencyTemplates.set(\n\t\t\t\t\tConstDependency,\n\t\t\t\t\tnew ConstDependency.Template()\n\t\t\t\t);\n\t\t\t\tconst handler = (parser, parserOptions) => {\n\t\t\t\t\tObject.keys(definitions).forEach(name => {\n\t\t\t\t\t\tvar request = [].concat(definitions[name]);\n\t\t\t\t\t\tvar splittedName = name.split(\".\");\n\t\t\t\t\t\tif (splittedName.length > 0) {\n\t\t\t\t\t\t\tsplittedName.slice(1).forEach((_, i) => {\n\t\t\t\t\t\t\t\tconst name = splittedName.slice(0, i + 1).join(\".\");\n\t\t\t\t\t\t\t\tparser.hooks.canRename\n\t\t\t\t\t\t\t\t\t.for(name)\n\t\t\t\t\t\t\t\t\t.tap(\"ProvidePlugin\", ParserHelpers.approve);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tparser.hooks.expression.for(name).tap(\"ProvidePlugin\", expr => {\n\t\t\t\t\t\t\tlet nameIdentifier = name;\n\t\t\t\t\t\t\tconst scopedName = name.includes(\".\");\n\t\t\t\t\t\t\tlet expression = `require(${JSON.stringify(request[0])})`;\n\t\t\t\t\t\t\tif (scopedName) {\n\t\t\t\t\t\t\t\tnameIdentifier = `__webpack_provided_${name.replace(\n\t\t\t\t\t\t\t\t\t/\\./g,\n\t\t\t\t\t\t\t\t\t\"_dot_\"\n\t\t\t\t\t\t\t\t)}`;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (request.length > 1) {\n\t\t\t\t\t\t\t\texpression += request\n\t\t\t\t\t\t\t\t\t.slice(1)\n\t\t\t\t\t\t\t\t\t.map(r => `[${JSON.stringify(r)}]`)\n\t\t\t\t\t\t\t\t\t.join(\"\");\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t!ParserHelpers.addParsedVariableToModule(\n\t\t\t\t\t\t\t\t\tparser,\n\t\t\t\t\t\t\t\t\tnameIdentifier,\n\t\t\t\t\t\t\t\t\texpression\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (scopedName) {\n\t\t\t\t\t\t\t\tParserHelpers.toConstantDependency(\n\t\t\t\t\t\t\t\t\tparser,\n\t\t\t\t\t\t\t\t\tnameIdentifier\n\t\t\t\t\t\t\t\t)(expr);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t};\n\t\t\t\tnormalModuleFactory.hooks.parser\n\t\t\t\t\t.for(\"javascript/auto\")\n\t\t\t\t\t.tap(\"ProvidePlugin\", handler);\n\t\t\t\tnormalModuleFactory.hooks.parser\n\t\t\t\t\t.for(\"javascript/dynamic\")\n\t\t\t\t\t.tap(\"ProvidePlugin\", handler);\n\n\t\t\t\t// Disable ProvidePlugin for javascript/esm, see https://github.com/webpack/webpack/issues/7032\n\t\t\t}\n\t\t);\n\t}\n}\nmodule.exports = ProvidePlugin;\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,YAAY;;AAEZ,MAAMA,aAAa,GAAGC,OAAO,CAAC,iBAAiB,CAAC;AAChD,MAAMC,eAAe,GAAGD,OAAO,CAAC,gCAAgC,CAAC;AAEjE,MAAME,WAAW,GAAGF,OAAO,CAAC,eAAe,CAAC;AAE5C,MAAMG,aAAa,CAAC;EACnBC,WAAWA,CAACC,WAAW,EAAE;IACxB,IAAI,CAACA,WAAW,GAAGA,WAAW;EAC/B;EAEAC,KAAKA,CAACC,QAAQ,EAAE;IACf,MAAMF,WAAW,GAAG,IAAI,CAACA,WAAW;IACpCE,QAAQ,CAACC,KAAK,CAACC,WAAW,CAACC,GAAG,CAC7B,eAAe,EACf,CAACD,WAAW,EAAE;MAAEE;IAAoB,CAAC,KAAK;MACzCF,WAAW,CAACG,mBAAmB,CAACC,GAAG,CAACZ,eAAe,EAAE,IAAIC,WAAW,CAAC,CAAC,CAAC;MACvEO,WAAW,CAACK,mBAAmB,CAACD,GAAG,CAClCZ,eAAe,EACf,IAAIA,eAAe,CAACc,QAAQ,CAAC,CAC9B,CAAC;MACD,MAAMC,OAAO,GAAGA,CAACC,MAAM,EAAEC,aAAa,KAAK;QAC1CC,MAAM,CAACC,IAAI,CAACf,WAAW,CAAC,CAACgB,OAAO,CAACC,IAAI,IAAI;UACxC,IAAIC,OAAO,GAAG,EAAE,CAACC,MAAM,CAACnB,WAAW,CAACiB,IAAI,CAAC,CAAC;UAC1C,IAAIG,YAAY,GAAGH,IAAI,CAACI,KAAK,CAAC,GAAG,CAAC;UAClC,IAAID,YAAY,CAACE,MAAM,GAAG,CAAC,EAAE;YAC5BF,YAAY,CAACG,KAAK,CAAC,CAAC,CAAC,CAACP,OAAO,CAAC,CAACQ,CAAC,EAAEC,CAAC,KAAK;cACvC,MAAMR,IAAI,GAAGG,YAAY,CAACG,KAAK,CAAC,CAAC,EAAEE,CAAC,GAAG,CAAC,CAAC,CAACC,IAAI,CAAC,GAAG,CAAC;cACnDd,MAAM,CAACT,KAAK,CAACwB,SAAS,CACpBC,GAAG,CAACX,IAAI,CAAC,CACTZ,GAAG,CAAC,eAAe,EAAEX,aAAa,CAACmC,OAAO,CAAC;YAC9C,CAAC,CAAC;UACH;UACAjB,MAAM,CAACT,KAAK,CAAC2B,UAAU,CAACF,GAAG,CAACX,IAAI,CAAC,CAACZ,GAAG,CAAC,eAAe,EAAE0B,IAAI,IAAI;YAC9D,IAAIC,cAAc,GAAGf,IAAI;YACzB,MAAMgB,UAAU,GAAGhB,IAAI,CAACiB,QAAQ,CAAC,GAAG,CAAC;YACrC,IAAIJ,UAAU,GAAG,WAAWK,IAAI,CAACC,SAAS,CAAClB,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG;YACzD,IAAIe,UAAU,EAAE;cACfD,cAAc,GAAG,sBAAsBf,IAAI,CAACoB,OAAO,CAClD,KAAK,EACL,OACD,CAAC,EAAE;YACJ;YACA,IAAInB,OAAO,CAACI,MAAM,GAAG,CAAC,EAAE;cACvBQ,UAAU,IAAIZ,OAAO,CACnBK,KAAK,CAAC,CAAC,CAAC,CACRe,GAAG,CAACC,CAAC,IAAI,IAAIJ,IAAI,CAACC,SAAS,CAACG,CAAC,CAAC,GAAG,CAAC,CAClCb,IAAI,CAAC,EAAE,CAAC;YACX;YACA,IACC,CAAChC,aAAa,CAAC8C,yBAAyB,CACvC5B,MAAM,EACNoB,cAAc,EACdF,UACD,CAAC,EACA;cACD,OAAO,KAAK;YACb;YACA,IAAIG,UAAU,EAAE;cACfvC,aAAa,CAAC+C,oBAAoB,CACjC7B,MAAM,EACNoB,cACD,CAAC,CAACD,IAAI,CAAC;YACR;YACA,OAAO,IAAI;UACZ,CAAC,CAAC;QACH,CAAC,CAAC;MACH,CAAC;MACDzB,mBAAmB,CAACH,KAAK,CAACS,MAAM,CAC9BgB,GAAG,CAAC,iBAAiB,CAAC,CACtBvB,GAAG,CAAC,eAAe,EAAEM,OAAO,CAAC;MAC/BL,mBAAmB,CAACH,KAAK,CAACS,MAAM,CAC9BgB,GAAG,CAAC,oBAAoB,CAAC,CACzBvB,GAAG,CAAC,eAAe,EAAEM,OAAO,CAAC;;MAE/B;IACD,CACD,CAAC;EACF;AACD;AACA+B,MAAM,CAACC,OAAO,GAAG7C,aAAa","ignoreList":[]},"metadata":{},"sourceType":"script"}