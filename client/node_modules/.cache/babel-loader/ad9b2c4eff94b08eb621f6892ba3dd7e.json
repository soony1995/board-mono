{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst {\n  RawSource,\n  ReplaceSource\n} = require(\"webpack-sources\");\n\n/** @typedef {import(\"./Dependency\")} Dependency */\n/** @typedef {import(\"./Dependency\").DependencyTemplate} DependencyTemplate */\n/** @typedef {import(\"./RuntimeTemplate\")} RuntimeTemplate */\n/** @typedef {import(\"./util/createHash\").Hash} Hash */\n/** @typedef {(d: Dependency) => boolean} DependencyFilterFunction */\n/** @typedef {Map<Function, DependencyTemplate>} DependencyTemplates */\n\nclass DependenciesBlockVariable {\n  /**\n   * Creates an instance of DependenciesBlockVariable.\n   * @param {string} name name of DependenciesBlockVariable\n   * @param {string} expression expression string\n   * @param {Dependency[]=} dependencies dependencies tied to this varaiable\n   */\n  constructor(name, expression, dependencies) {\n    this.name = name;\n    this.expression = expression;\n    this.dependencies = dependencies || [];\n  }\n\n  /**\n   * @param {Hash} hash hash for instance to update\n   * @returns {void}\n   */\n  updateHash(hash) {\n    hash.update(this.name);\n    hash.update(this.expression);\n    for (const d of this.dependencies) {\n      d.updateHash(hash);\n    }\n  }\n\n  /**\n   * @param {DependencyTemplates} dependencyTemplates Dependency constructors and templates Map.\n   * @param {RuntimeTemplate} runtimeTemplate runtimeTemplate to generate expression souce\n   * @returns {ReplaceSource} returns constructed source for expression via templates\n   */\n  expressionSource(dependencyTemplates, runtimeTemplate) {\n    const source = new ReplaceSource(new RawSource(this.expression));\n    for (const dep of this.dependencies) {\n      const template = dependencyTemplates.get(dep.constructor);\n      if (!template) {\n        throw new Error(`No template for dependency: ${dep.constructor.name}`);\n      }\n      template.apply(dep, source, runtimeTemplate, dependencyTemplates);\n    }\n    return source;\n  }\n  disconnect() {\n    for (const d of this.dependencies) {\n      d.disconnect();\n    }\n  }\n  hasDependencies(filter) {\n    if (filter) {\n      return this.dependencies.some(filter);\n    }\n    return this.dependencies.length > 0;\n  }\n}\nmodule.exports = DependenciesBlockVariable;","map":{"version":3,"names":["RawSource","ReplaceSource","require","DependenciesBlockVariable","constructor","name","expression","dependencies","updateHash","hash","update","d","expressionSource","dependencyTemplates","runtimeTemplate","source","dep","template","get","Error","apply","disconnect","hasDependencies","filter","some","length","module","exports"],"sources":["/home/soon/bulletin-board/node_modules/webpack/lib/DependenciesBlockVariable.js"],"sourcesContent":["/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst { RawSource, ReplaceSource } = require(\"webpack-sources\");\n\n/** @typedef {import(\"./Dependency\")} Dependency */\n/** @typedef {import(\"./Dependency\").DependencyTemplate} DependencyTemplate */\n/** @typedef {import(\"./RuntimeTemplate\")} RuntimeTemplate */\n/** @typedef {import(\"./util/createHash\").Hash} Hash */\n/** @typedef {(d: Dependency) => boolean} DependencyFilterFunction */\n/** @typedef {Map<Function, DependencyTemplate>} DependencyTemplates */\n\nclass DependenciesBlockVariable {\n\t/**\n\t * Creates an instance of DependenciesBlockVariable.\n\t * @param {string} name name of DependenciesBlockVariable\n\t * @param {string} expression expression string\n\t * @param {Dependency[]=} dependencies dependencies tied to this varaiable\n\t */\n\tconstructor(name, expression, dependencies) {\n\t\tthis.name = name;\n\t\tthis.expression = expression;\n\t\tthis.dependencies = dependencies || [];\n\t}\n\n\t/**\n\t * @param {Hash} hash hash for instance to update\n\t * @returns {void}\n\t */\n\tupdateHash(hash) {\n\t\thash.update(this.name);\n\t\thash.update(this.expression);\n\t\tfor (const d of this.dependencies) {\n\t\t\td.updateHash(hash);\n\t\t}\n\t}\n\n\t/**\n\t * @param {DependencyTemplates} dependencyTemplates Dependency constructors and templates Map.\n\t * @param {RuntimeTemplate} runtimeTemplate runtimeTemplate to generate expression souce\n\t * @returns {ReplaceSource} returns constructed source for expression via templates\n\t */\n\texpressionSource(dependencyTemplates, runtimeTemplate) {\n\t\tconst source = new ReplaceSource(new RawSource(this.expression));\n\t\tfor (const dep of this.dependencies) {\n\t\t\tconst template = dependencyTemplates.get(dep.constructor);\n\t\t\tif (!template) {\n\t\t\t\tthrow new Error(`No template for dependency: ${dep.constructor.name}`);\n\t\t\t}\n\t\t\ttemplate.apply(dep, source, runtimeTemplate, dependencyTemplates);\n\t\t}\n\t\treturn source;\n\t}\n\n\tdisconnect() {\n\t\tfor (const d of this.dependencies) {\n\t\t\td.disconnect();\n\t\t}\n\t}\n\n\thasDependencies(filter) {\n\t\tif (filter) {\n\t\t\treturn this.dependencies.some(filter);\n\t\t}\n\t\treturn this.dependencies.length > 0;\n\t}\n}\n\nmodule.exports = DependenciesBlockVariable;\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,YAAY;;AAEZ,MAAM;EAAEA,SAAS;EAAEC;AAAc,CAAC,GAAGC,OAAO,CAAC,iBAAiB,CAAC;;AAE/D;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAMC,yBAAyB,CAAC;EAC/B;AACD;AACA;AACA;AACA;AACA;EACCC,WAAWA,CAACC,IAAI,EAAEC,UAAU,EAAEC,YAAY,EAAE;IAC3C,IAAI,CAACF,IAAI,GAAGA,IAAI;IAChB,IAAI,CAACC,UAAU,GAAGA,UAAU;IAC5B,IAAI,CAACC,YAAY,GAAGA,YAAY,IAAI,EAAE;EACvC;;EAEA;AACD;AACA;AACA;EACCC,UAAUA,CAACC,IAAI,EAAE;IAChBA,IAAI,CAACC,MAAM,CAAC,IAAI,CAACL,IAAI,CAAC;IACtBI,IAAI,CAACC,MAAM,CAAC,IAAI,CAACJ,UAAU,CAAC;IAC5B,KAAK,MAAMK,CAAC,IAAI,IAAI,CAACJ,YAAY,EAAE;MAClCI,CAAC,CAACH,UAAU,CAACC,IAAI,CAAC;IACnB;EACD;;EAEA;AACD;AACA;AACA;AACA;EACCG,gBAAgBA,CAACC,mBAAmB,EAAEC,eAAe,EAAE;IACtD,MAAMC,MAAM,GAAG,IAAId,aAAa,CAAC,IAAID,SAAS,CAAC,IAAI,CAACM,UAAU,CAAC,CAAC;IAChE,KAAK,MAAMU,GAAG,IAAI,IAAI,CAACT,YAAY,EAAE;MACpC,MAAMU,QAAQ,GAAGJ,mBAAmB,CAACK,GAAG,CAACF,GAAG,CAACZ,WAAW,CAAC;MACzD,IAAI,CAACa,QAAQ,EAAE;QACd,MAAM,IAAIE,KAAK,CAAC,+BAA+BH,GAAG,CAACZ,WAAW,CAACC,IAAI,EAAE,CAAC;MACvE;MACAY,QAAQ,CAACG,KAAK,CAACJ,GAAG,EAAED,MAAM,EAAED,eAAe,EAAED,mBAAmB,CAAC;IAClE;IACA,OAAOE,MAAM;EACd;EAEAM,UAAUA,CAAA,EAAG;IACZ,KAAK,MAAMV,CAAC,IAAI,IAAI,CAACJ,YAAY,EAAE;MAClCI,CAAC,CAACU,UAAU,CAAC,CAAC;IACf;EACD;EAEAC,eAAeA,CAACC,MAAM,EAAE;IACvB,IAAIA,MAAM,EAAE;MACX,OAAO,IAAI,CAAChB,YAAY,CAACiB,IAAI,CAACD,MAAM,CAAC;IACtC;IACA,OAAO,IAAI,CAAChB,YAAY,CAACkB,MAAM,GAAG,CAAC;EACpC;AACD;AAEAC,MAAM,CAACC,OAAO,GAAGxB,yBAAyB","ignoreList":[]},"metadata":{},"sourceType":"script"}