{"ast":null,"code":"'use strict';\n\nconst pTry = require('p-try');\nconst pLimit = concurrency => {\n  if (!((Number.isInteger(concurrency) || concurrency === Infinity) && concurrency > 0)) {\n    return Promise.reject(new TypeError('Expected `concurrency` to be a number from 1 and up'));\n  }\n  const queue = [];\n  let activeCount = 0;\n  const next = () => {\n    activeCount--;\n    if (queue.length > 0) {\n      queue.shift()();\n    }\n  };\n  const run = (fn, resolve, ...args) => {\n    activeCount++;\n    const result = pTry(fn, ...args);\n    resolve(result);\n    result.then(next, next);\n  };\n  const enqueue = (fn, resolve, ...args) => {\n    if (activeCount < concurrency) {\n      run(fn, resolve, ...args);\n    } else {\n      queue.push(run.bind(null, fn, resolve, ...args));\n    }\n  };\n  const generator = (fn, ...args) => new Promise(resolve => enqueue(fn, resolve, ...args));\n  Object.defineProperties(generator, {\n    activeCount: {\n      get: () => activeCount\n    },\n    pendingCount: {\n      get: () => queue.length\n    },\n    clearQueue: {\n      value: () => {\n        queue.length = 0;\n      }\n    }\n  });\n  return generator;\n};\nmodule.exports = pLimit;\nmodule.exports.default = pLimit;","map":{"version":3,"names":["pTry","require","pLimit","concurrency","Number","isInteger","Infinity","Promise","reject","TypeError","queue","activeCount","next","length","shift","run","fn","resolve","args","result","then","enqueue","push","bind","generator","Object","defineProperties","get","pendingCount","clearQueue","value","module","exports","default"],"sources":["/home/soon/bulletin-board/node_modules/p-limit/index.js"],"sourcesContent":["'use strict';\nconst pTry = require('p-try');\n\nconst pLimit = concurrency => {\n\tif (!((Number.isInteger(concurrency) || concurrency === Infinity) && concurrency > 0)) {\n\t\treturn Promise.reject(new TypeError('Expected `concurrency` to be a number from 1 and up'));\n\t}\n\n\tconst queue = [];\n\tlet activeCount = 0;\n\n\tconst next = () => {\n\t\tactiveCount--;\n\n\t\tif (queue.length > 0) {\n\t\t\tqueue.shift()();\n\t\t}\n\t};\n\n\tconst run = (fn, resolve, ...args) => {\n\t\tactiveCount++;\n\n\t\tconst result = pTry(fn, ...args);\n\n\t\tresolve(result);\n\n\t\tresult.then(next, next);\n\t};\n\n\tconst enqueue = (fn, resolve, ...args) => {\n\t\tif (activeCount < concurrency) {\n\t\t\trun(fn, resolve, ...args);\n\t\t} else {\n\t\t\tqueue.push(run.bind(null, fn, resolve, ...args));\n\t\t}\n\t};\n\n\tconst generator = (fn, ...args) => new Promise(resolve => enqueue(fn, resolve, ...args));\n\tObject.defineProperties(generator, {\n\t\tactiveCount: {\n\t\t\tget: () => activeCount\n\t\t},\n\t\tpendingCount: {\n\t\t\tget: () => queue.length\n\t\t},\n\t\tclearQueue: {\n\t\t\tvalue: () => {\n\t\t\t\tqueue.length = 0;\n\t\t\t}\n\t\t}\n\t});\n\n\treturn generator;\n};\n\nmodule.exports = pLimit;\nmodule.exports.default = pLimit;\n"],"mappings":"AAAA,YAAY;;AACZ,MAAMA,IAAI,GAAGC,OAAO,CAAC,OAAO,CAAC;AAE7B,MAAMC,MAAM,GAAGC,WAAW,IAAI;EAC7B,IAAI,EAAE,CAACC,MAAM,CAACC,SAAS,CAACF,WAAW,CAAC,IAAIA,WAAW,KAAKG,QAAQ,KAAKH,WAAW,GAAG,CAAC,CAAC,EAAE;IACtF,OAAOI,OAAO,CAACC,MAAM,CAAC,IAAIC,SAAS,CAAC,qDAAqD,CAAC,CAAC;EAC5F;EAEA,MAAMC,KAAK,GAAG,EAAE;EAChB,IAAIC,WAAW,GAAG,CAAC;EAEnB,MAAMC,IAAI,GAAGA,CAAA,KAAM;IAClBD,WAAW,EAAE;IAEb,IAAID,KAAK,CAACG,MAAM,GAAG,CAAC,EAAE;MACrBH,KAAK,CAACI,KAAK,CAAC,CAAC,CAAC,CAAC;IAChB;EACD,CAAC;EAED,MAAMC,GAAG,GAAGA,CAACC,EAAE,EAAEC,OAAO,EAAE,GAAGC,IAAI,KAAK;IACrCP,WAAW,EAAE;IAEb,MAAMQ,MAAM,GAAGnB,IAAI,CAACgB,EAAE,EAAE,GAAGE,IAAI,CAAC;IAEhCD,OAAO,CAACE,MAAM,CAAC;IAEfA,MAAM,CAACC,IAAI,CAACR,IAAI,EAAEA,IAAI,CAAC;EACxB,CAAC;EAED,MAAMS,OAAO,GAAGA,CAACL,EAAE,EAAEC,OAAO,EAAE,GAAGC,IAAI,KAAK;IACzC,IAAIP,WAAW,GAAGR,WAAW,EAAE;MAC9BY,GAAG,CAACC,EAAE,EAAEC,OAAO,EAAE,GAAGC,IAAI,CAAC;IAC1B,CAAC,MAAM;MACNR,KAAK,CAACY,IAAI,CAACP,GAAG,CAACQ,IAAI,CAAC,IAAI,EAAEP,EAAE,EAAEC,OAAO,EAAE,GAAGC,IAAI,CAAC,CAAC;IACjD;EACD,CAAC;EAED,MAAMM,SAAS,GAAGA,CAACR,EAAE,EAAE,GAAGE,IAAI,KAAK,IAAIX,OAAO,CAACU,OAAO,IAAII,OAAO,CAACL,EAAE,EAAEC,OAAO,EAAE,GAAGC,IAAI,CAAC,CAAC;EACxFO,MAAM,CAACC,gBAAgB,CAACF,SAAS,EAAE;IAClCb,WAAW,EAAE;MACZgB,GAAG,EAAEA,CAAA,KAAMhB;IACZ,CAAC;IACDiB,YAAY,EAAE;MACbD,GAAG,EAAEA,CAAA,KAAMjB,KAAK,CAACG;IAClB,CAAC;IACDgB,UAAU,EAAE;MACXC,KAAK,EAAEA,CAAA,KAAM;QACZpB,KAAK,CAACG,MAAM,GAAG,CAAC;MACjB;IACD;EACD,CAAC,CAAC;EAEF,OAAOW,SAAS;AACjB,CAAC;AAEDO,MAAM,CAACC,OAAO,GAAG9B,MAAM;AACvB6B,MAAM,CAACC,OAAO,CAACC,OAAO,GAAG/B,MAAM","ignoreList":[]},"metadata":{},"sourceType":"script"}