{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst forEachBail = require(\"./forEachBail\");\nfunction loadDescriptionFile(resolver, directory, filenames, resolveContext, callback) {\n  (function findDescriptionFile() {\n    forEachBail(filenames, (filename, callback) => {\n      const descriptionFilePath = resolver.join(directory, filename);\n      if (resolver.fileSystem.readJson) {\n        resolver.fileSystem.readJson(descriptionFilePath, (err, content) => {\n          if (err) {\n            if (typeof err.code !== \"undefined\") return callback();\n            return onJson(err);\n          }\n          onJson(null, content);\n        });\n      } else {\n        resolver.fileSystem.readFile(descriptionFilePath, (err, content) => {\n          if (err) return callback();\n          let json;\n          try {\n            json = JSON.parse(content);\n          } catch (e) {\n            onJson(e);\n          }\n          onJson(null, json);\n        });\n      }\n      function onJson(err, content) {\n        if (err) {\n          if (resolveContext.log) resolveContext.log(descriptionFilePath + \" (directory description file): \" + err);else err.message = descriptionFilePath + \" (directory description file): \" + err;\n          return callback(err);\n        }\n        callback(null, {\n          content: content,\n          directory: directory,\n          path: descriptionFilePath\n        });\n      }\n    }, (err, result) => {\n      if (err) return callback(err);\n      if (result) {\n        return callback(null, result);\n      } else {\n        directory = cdUp(directory);\n        if (!directory) {\n          return callback();\n        } else {\n          return findDescriptionFile();\n        }\n      }\n    });\n  })();\n}\nfunction getField(content, field) {\n  if (!content) return undefined;\n  if (Array.isArray(field)) {\n    let current = content;\n    for (let j = 0; j < field.length; j++) {\n      if (current === null || typeof current !== \"object\") {\n        current = null;\n        break;\n      }\n      current = current[field[j]];\n    }\n    if (typeof current === \"object\") {\n      return current;\n    }\n  } else {\n    if (typeof content[field] === \"object\") {\n      return content[field];\n    }\n  }\n}\nfunction cdUp(directory) {\n  if (directory === \"/\") return null;\n  const i = directory.lastIndexOf(\"/\"),\n    j = directory.lastIndexOf(\"\\\\\");\n  const p = i < 0 ? j : j < 0 ? i : i < j ? j : i;\n  if (p < 0) return null;\n  return directory.substr(0, p || 1);\n}\nexports.loadDescriptionFile = loadDescriptionFile;\nexports.getField = getField;\nexports.cdUp = cdUp;","map":{"version":3,"names":["forEachBail","require","loadDescriptionFile","resolver","directory","filenames","resolveContext","callback","findDescriptionFile","filename","descriptionFilePath","join","fileSystem","readJson","err","content","code","onJson","readFile","json","JSON","parse","e","log","message","path","result","cdUp","getField","field","undefined","Array","isArray","current","j","length","i","lastIndexOf","p","substr","exports"],"sources":["/home/soon/bulletin-board/node_modules/enhanced-resolve/lib/DescriptionFileUtils.js"],"sourcesContent":["/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst forEachBail = require(\"./forEachBail\");\n\nfunction loadDescriptionFile(\n\tresolver,\n\tdirectory,\n\tfilenames,\n\tresolveContext,\n\tcallback\n) {\n\t(function findDescriptionFile() {\n\t\tforEachBail(\n\t\t\tfilenames,\n\t\t\t(filename, callback) => {\n\t\t\t\tconst descriptionFilePath = resolver.join(directory, filename);\n\t\t\t\tif (resolver.fileSystem.readJson) {\n\t\t\t\t\tresolver.fileSystem.readJson(descriptionFilePath, (err, content) => {\n\t\t\t\t\t\tif (err) {\n\t\t\t\t\t\t\tif (typeof err.code !== \"undefined\") return callback();\n\t\t\t\t\t\t\treturn onJson(err);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonJson(null, content);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tresolver.fileSystem.readFile(descriptionFilePath, (err, content) => {\n\t\t\t\t\t\tif (err) return callback();\n\t\t\t\t\t\tlet json;\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tjson = JSON.parse(content);\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\tonJson(e);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonJson(null, json);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tfunction onJson(err, content) {\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\tif (resolveContext.log)\n\t\t\t\t\t\t\tresolveContext.log(\n\t\t\t\t\t\t\t\tdescriptionFilePath + \" (directory description file): \" + err\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\terr.message =\n\t\t\t\t\t\t\t\tdescriptionFilePath + \" (directory description file): \" + err;\n\t\t\t\t\t\treturn callback(err);\n\t\t\t\t\t}\n\t\t\t\t\tcallback(null, {\n\t\t\t\t\t\tcontent: content,\n\t\t\t\t\t\tdirectory: directory,\n\t\t\t\t\t\tpath: descriptionFilePath\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\t(err, result) => {\n\t\t\t\tif (err) return callback(err);\n\t\t\t\tif (result) {\n\t\t\t\t\treturn callback(null, result);\n\t\t\t\t} else {\n\t\t\t\t\tdirectory = cdUp(directory);\n\t\t\t\t\tif (!directory) {\n\t\t\t\t\t\treturn callback();\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn findDescriptionFile();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t})();\n}\n\nfunction getField(content, field) {\n\tif (!content) return undefined;\n\tif (Array.isArray(field)) {\n\t\tlet current = content;\n\t\tfor (let j = 0; j < field.length; j++) {\n\t\t\tif (current === null || typeof current !== \"object\") {\n\t\t\t\tcurrent = null;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcurrent = current[field[j]];\n\t\t}\n\t\tif (typeof current === \"object\") {\n\t\t\treturn current;\n\t\t}\n\t} else {\n\t\tif (typeof content[field] === \"object\") {\n\t\t\treturn content[field];\n\t\t}\n\t}\n}\n\nfunction cdUp(directory) {\n\tif (directory === \"/\") return null;\n\tconst i = directory.lastIndexOf(\"/\"),\n\t\tj = directory.lastIndexOf(\"\\\\\");\n\tconst p = i < 0 ? j : j < 0 ? i : i < j ? j : i;\n\tif (p < 0) return null;\n\treturn directory.substr(0, p || 1);\n}\n\nexports.loadDescriptionFile = loadDescriptionFile;\nexports.getField = getField;\nexports.cdUp = cdUp;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script"}