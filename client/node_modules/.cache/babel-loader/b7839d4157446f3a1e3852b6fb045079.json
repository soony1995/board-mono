{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst path = require(\"path\");\nconst NORMALIZE_SLASH_DIRECTION_REGEXP = /\\\\/g;\nconst PATH_CHARS_REGEXP = /[-[\\]{}()*+?.,\\\\^$|#\\s]/g;\nconst SEPARATOR_REGEXP = /[/\\\\]$/;\nconst FRONT_OR_BACK_BANG_REGEXP = /^!|!$/g;\nconst INDEX_JS_REGEXP = /\\/index.js(!|\\?|\\(query\\))/g;\nconst MATCH_RESOURCE_REGEXP = /!=!/;\nconst normalizeBackSlashDirection = request => {\n  return request.replace(NORMALIZE_SLASH_DIRECTION_REGEXP, \"/\");\n};\nconst createRegExpForPath = path => {\n  const regexpTypePartial = path.replace(PATH_CHARS_REGEXP, \"\\\\$&\");\n  return new RegExp(`(^|!)${regexpTypePartial}`, \"g\");\n};\nclass RequestShortener {\n  constructor(directory) {\n    directory = normalizeBackSlashDirection(directory);\n    if (SEPARATOR_REGEXP.test(directory)) {\n      directory = directory.substr(0, directory.length - 1);\n    }\n    if (directory) {\n      this.currentDirectoryRegExp = createRegExpForPath(directory);\n    }\n    const dirname = path.dirname(directory);\n    const endsWithSeparator = SEPARATOR_REGEXP.test(dirname);\n    const parentDirectory = endsWithSeparator ? dirname.substr(0, dirname.length - 1) : dirname;\n    if (parentDirectory && parentDirectory !== directory) {\n      this.parentDirectoryRegExp = createRegExpForPath(`${parentDirectory}/`);\n    }\n    if (__dirname.length >= 2) {\n      const buildins = normalizeBackSlashDirection(path.join(__dirname, \"..\"));\n      const buildinsAsModule = this.currentDirectoryRegExp && this.currentDirectoryRegExp.test(buildins);\n      this.buildinsAsModule = buildinsAsModule;\n      this.buildinsRegExp = createRegExpForPath(buildins);\n    }\n    this.cache = new Map();\n  }\n  shorten(request) {\n    if (!request) return request;\n    const cacheEntry = this.cache.get(request);\n    if (cacheEntry !== undefined) {\n      return cacheEntry;\n    }\n    let result = normalizeBackSlashDirection(request);\n    if (this.buildinsAsModule && this.buildinsRegExp) {\n      result = result.replace(this.buildinsRegExp, \"!(webpack)\");\n    }\n    if (this.currentDirectoryRegExp) {\n      result = result.replace(this.currentDirectoryRegExp, \"!.\");\n    }\n    if (this.parentDirectoryRegExp) {\n      result = result.replace(this.parentDirectoryRegExp, \"!../\");\n    }\n    if (!this.buildinsAsModule && this.buildinsRegExp) {\n      result = result.replace(this.buildinsRegExp, \"!(webpack)\");\n    }\n    result = result.replace(INDEX_JS_REGEXP, \"$1\");\n    result = result.replace(FRONT_OR_BACK_BANG_REGEXP, \"\");\n    result = result.replace(MATCH_RESOURCE_REGEXP, \" = \");\n    this.cache.set(request, result);\n    return result;\n  }\n}\nmodule.exports = RequestShortener;","map":{"version":3,"names":["path","require","NORMALIZE_SLASH_DIRECTION_REGEXP","PATH_CHARS_REGEXP","SEPARATOR_REGEXP","FRONT_OR_BACK_BANG_REGEXP","INDEX_JS_REGEXP","MATCH_RESOURCE_REGEXP","normalizeBackSlashDirection","request","replace","createRegExpForPath","regexpTypePartial","RegExp","RequestShortener","constructor","directory","test","substr","length","currentDirectoryRegExp","dirname","endsWithSeparator","parentDirectory","parentDirectoryRegExp","__dirname","buildins","join","buildinsAsModule","buildinsRegExp","cache","Map","shorten","cacheEntry","get","undefined","result","set","module","exports"],"sources":["/home/soon/bulletin-board/node_modules/webpack/lib/RequestShortener.js"],"sourcesContent":["/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst path = require(\"path\");\nconst NORMALIZE_SLASH_DIRECTION_REGEXP = /\\\\/g;\nconst PATH_CHARS_REGEXP = /[-[\\]{}()*+?.,\\\\^$|#\\s]/g;\nconst SEPARATOR_REGEXP = /[/\\\\]$/;\nconst FRONT_OR_BACK_BANG_REGEXP = /^!|!$/g;\nconst INDEX_JS_REGEXP = /\\/index.js(!|\\?|\\(query\\))/g;\nconst MATCH_RESOURCE_REGEXP = /!=!/;\n\nconst normalizeBackSlashDirection = request => {\n\treturn request.replace(NORMALIZE_SLASH_DIRECTION_REGEXP, \"/\");\n};\n\nconst createRegExpForPath = path => {\n\tconst regexpTypePartial = path.replace(PATH_CHARS_REGEXP, \"\\\\$&\");\n\treturn new RegExp(`(^|!)${regexpTypePartial}`, \"g\");\n};\n\nclass RequestShortener {\n\tconstructor(directory) {\n\t\tdirectory = normalizeBackSlashDirection(directory);\n\t\tif (SEPARATOR_REGEXP.test(directory)) {\n\t\t\tdirectory = directory.substr(0, directory.length - 1);\n\t\t}\n\n\t\tif (directory) {\n\t\t\tthis.currentDirectoryRegExp = createRegExpForPath(directory);\n\t\t}\n\n\t\tconst dirname = path.dirname(directory);\n\t\tconst endsWithSeparator = SEPARATOR_REGEXP.test(dirname);\n\t\tconst parentDirectory = endsWithSeparator\n\t\t\t? dirname.substr(0, dirname.length - 1)\n\t\t\t: dirname;\n\t\tif (parentDirectory && parentDirectory !== directory) {\n\t\t\tthis.parentDirectoryRegExp = createRegExpForPath(`${parentDirectory}/`);\n\t\t}\n\n\t\tif (__dirname.length >= 2) {\n\t\t\tconst buildins = normalizeBackSlashDirection(path.join(__dirname, \"..\"));\n\t\t\tconst buildinsAsModule =\n\t\t\t\tthis.currentDirectoryRegExp &&\n\t\t\t\tthis.currentDirectoryRegExp.test(buildins);\n\t\t\tthis.buildinsAsModule = buildinsAsModule;\n\t\t\tthis.buildinsRegExp = createRegExpForPath(buildins);\n\t\t}\n\n\t\tthis.cache = new Map();\n\t}\n\n\tshorten(request) {\n\t\tif (!request) return request;\n\t\tconst cacheEntry = this.cache.get(request);\n\t\tif (cacheEntry !== undefined) {\n\t\t\treturn cacheEntry;\n\t\t}\n\t\tlet result = normalizeBackSlashDirection(request);\n\t\tif (this.buildinsAsModule && this.buildinsRegExp) {\n\t\t\tresult = result.replace(this.buildinsRegExp, \"!(webpack)\");\n\t\t}\n\t\tif (this.currentDirectoryRegExp) {\n\t\t\tresult = result.replace(this.currentDirectoryRegExp, \"!.\");\n\t\t}\n\t\tif (this.parentDirectoryRegExp) {\n\t\t\tresult = result.replace(this.parentDirectoryRegExp, \"!../\");\n\t\t}\n\t\tif (!this.buildinsAsModule && this.buildinsRegExp) {\n\t\t\tresult = result.replace(this.buildinsRegExp, \"!(webpack)\");\n\t\t}\n\t\tresult = result.replace(INDEX_JS_REGEXP, \"$1\");\n\t\tresult = result.replace(FRONT_OR_BACK_BANG_REGEXP, \"\");\n\t\tresult = result.replace(MATCH_RESOURCE_REGEXP, \" = \");\n\t\tthis.cache.set(request, result);\n\t\treturn result;\n\t}\n}\n\nmodule.exports = RequestShortener;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script"}