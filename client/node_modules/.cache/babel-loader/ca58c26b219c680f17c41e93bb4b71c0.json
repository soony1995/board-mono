{"ast":null,"code":"'use strict';\n\nconst LRU = require('lru-cache');\nconst MAX_SIZE = 50 * 1024 * 1024; // 50MB\nconst MAX_AGE = 3 * 60 * 1000;\nlet MEMOIZED = new LRU({\n  max: MAX_SIZE,\n  maxAge: MAX_AGE,\n  length: (entry, key) => {\n    if (key.startsWith('key:')) {\n      return entry.data.length;\n    } else if (key.startsWith('digest:')) {\n      return entry.length;\n    }\n  }\n});\nmodule.exports.clearMemoized = clearMemoized;\nfunction clearMemoized() {\n  const old = {};\n  MEMOIZED.forEach((v, k) => {\n    old[k] = v;\n  });\n  MEMOIZED.reset();\n  return old;\n}\nmodule.exports.put = put;\nfunction put(cache, entry, data, opts) {\n  pickMem(opts).set(`key:${cache}:${entry.key}`, {\n    entry,\n    data\n  });\n  putDigest(cache, entry.integrity, data, opts);\n}\nmodule.exports.put.byDigest = putDigest;\nfunction putDigest(cache, integrity, data, opts) {\n  pickMem(opts).set(`digest:${cache}:${integrity}`, data);\n}\nmodule.exports.get = get;\nfunction get(cache, key, opts) {\n  return pickMem(opts).get(`key:${cache}:${key}`);\n}\nmodule.exports.get.byDigest = getDigest;\nfunction getDigest(cache, integrity, opts) {\n  return pickMem(opts).get(`digest:${cache}:${integrity}`);\n}\nclass ObjProxy {\n  constructor(obj) {\n    this.obj = obj;\n  }\n  get(key) {\n    return this.obj[key];\n  }\n  set(key, val) {\n    this.obj[key] = val;\n  }\n}\nfunction pickMem(opts) {\n  if (!opts || !opts.memoize) {\n    return MEMOIZED;\n  } else if (opts.memoize.get && opts.memoize.set) {\n    return opts.memoize;\n  } else if (typeof opts.memoize === 'object') {\n    return new ObjProxy(opts.memoize);\n  } else {\n    return MEMOIZED;\n  }\n}","map":{"version":3,"names":["LRU","require","MAX_SIZE","MAX_AGE","MEMOIZED","max","maxAge","length","entry","key","startsWith","data","module","exports","clearMemoized","old","forEach","v","k","reset","put","cache","opts","pickMem","set","putDigest","integrity","byDigest","get","getDigest","ObjProxy","constructor","obj","val","memoize"],"sources":["/home/soon/bulletin-board/node_modules/webpack/node_modules/cacache/lib/memoization.js"],"sourcesContent":["'use strict'\n\nconst LRU = require('lru-cache')\n\nconst MAX_SIZE = 50 * 1024 * 1024 // 50MB\nconst MAX_AGE = 3 * 60 * 1000\n\nlet MEMOIZED = new LRU({\n  max: MAX_SIZE,\n  maxAge: MAX_AGE,\n  length: (entry, key) => {\n    if (key.startsWith('key:')) {\n      return entry.data.length\n    } else if (key.startsWith('digest:')) {\n      return entry.length\n    }\n  }\n})\n\nmodule.exports.clearMemoized = clearMemoized\nfunction clearMemoized () {\n  const old = {}\n  MEMOIZED.forEach((v, k) => {\n    old[k] = v\n  })\n  MEMOIZED.reset()\n  return old\n}\n\nmodule.exports.put = put\nfunction put (cache, entry, data, opts) {\n  pickMem(opts).set(`key:${cache}:${entry.key}`, { entry, data })\n  putDigest(cache, entry.integrity, data, opts)\n}\n\nmodule.exports.put.byDigest = putDigest\nfunction putDigest (cache, integrity, data, opts) {\n  pickMem(opts).set(`digest:${cache}:${integrity}`, data)\n}\n\nmodule.exports.get = get\nfunction get (cache, key, opts) {\n  return pickMem(opts).get(`key:${cache}:${key}`)\n}\n\nmodule.exports.get.byDigest = getDigest\nfunction getDigest (cache, integrity, opts) {\n  return pickMem(opts).get(`digest:${cache}:${integrity}`)\n}\n\nclass ObjProxy {\n  constructor (obj) {\n    this.obj = obj\n  }\n  get (key) { return this.obj[key] }\n  set (key, val) { this.obj[key] = val }\n}\n\nfunction pickMem (opts) {\n  if (!opts || !opts.memoize) {\n    return MEMOIZED\n  } else if (opts.memoize.get && opts.memoize.set) {\n    return opts.memoize\n  } else if (typeof opts.memoize === 'object') {\n    return new ObjProxy(opts.memoize)\n  } else {\n    return MEMOIZED\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script"}