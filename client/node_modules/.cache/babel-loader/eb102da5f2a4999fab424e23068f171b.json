{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst RequireResolveDependency = require(\"./RequireResolveDependency\");\nconst RequireResolveContextDependency = require(\"./RequireResolveContextDependency\");\nconst RequireResolveHeaderDependency = require(\"./RequireResolveHeaderDependency\");\nconst ContextDependencyHelpers = require(\"./ContextDependencyHelpers\");\nclass RequireResolveDependencyParserPlugin {\n  constructor(options) {\n    this.options = options;\n  }\n  apply(parser) {\n    const options = this.options;\n    const process = (expr, weak) => {\n      if (expr.arguments.length !== 1) return;\n      const param = parser.evaluateExpression(expr.arguments[0]);\n      if (param.isConditional()) {\n        for (const option of param.options) {\n          const result = processItem(expr, option, weak);\n          if (result === undefined) {\n            processContext(expr, option, weak);\n          }\n        }\n        const dep = new RequireResolveHeaderDependency(expr.callee.range);\n        dep.loc = expr.loc;\n        parser.state.current.addDependency(dep);\n        return true;\n      } else {\n        const result = processItem(expr, param, weak);\n        if (result === undefined) {\n          processContext(expr, param, weak);\n        }\n        const dep = new RequireResolveHeaderDependency(expr.callee.range);\n        dep.loc = expr.loc;\n        parser.state.current.addDependency(dep);\n        return true;\n      }\n    };\n    const processItem = (expr, param, weak) => {\n      if (param.isString()) {\n        const dep = new RequireResolveDependency(param.string, param.range);\n        dep.loc = expr.loc;\n        dep.optional = !!parser.scope.inTry;\n        dep.weak = weak;\n        parser.state.current.addDependency(dep);\n        return true;\n      }\n    };\n    const processContext = (expr, param, weak) => {\n      const dep = ContextDependencyHelpers.create(RequireResolveContextDependency, param.range, param, expr, options, {\n        mode: weak ? \"weak\" : \"sync\"\n      }, parser);\n      if (!dep) return;\n      dep.loc = expr.loc;\n      dep.optional = !!parser.scope.inTry;\n      parser.state.current.addDependency(dep);\n      return true;\n    };\n    parser.hooks.call.for(\"require.resolve\").tap(\"RequireResolveDependencyParserPlugin\", expr => {\n      return process(expr, false);\n    });\n    parser.hooks.call.for(\"require.resolveWeak\").tap(\"RequireResolveDependencyParserPlugin\", expr => {\n      return process(expr, true);\n    });\n  }\n}\nmodule.exports = RequireResolveDependencyParserPlugin;","map":{"version":3,"names":["RequireResolveDependency","require","RequireResolveContextDependency","RequireResolveHeaderDependency","ContextDependencyHelpers","RequireResolveDependencyParserPlugin","constructor","options","apply","parser","process","expr","weak","arguments","length","param","evaluateExpression","isConditional","option","result","processItem","undefined","processContext","dep","callee","range","loc","state","current","addDependency","isString","string","optional","scope","inTry","create","mode","hooks","call","for","tap","module","exports"],"sources":["/home/soon/bulletin-board/node_modules/webpack/lib/dependencies/RequireResolveDependencyParserPlugin.js"],"sourcesContent":["/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst RequireResolveDependency = require(\"./RequireResolveDependency\");\nconst RequireResolveContextDependency = require(\"./RequireResolveContextDependency\");\nconst RequireResolveHeaderDependency = require(\"./RequireResolveHeaderDependency\");\nconst ContextDependencyHelpers = require(\"./ContextDependencyHelpers\");\n\nclass RequireResolveDependencyParserPlugin {\n\tconstructor(options) {\n\t\tthis.options = options;\n\t}\n\n\tapply(parser) {\n\t\tconst options = this.options;\n\n\t\tconst process = (expr, weak) => {\n\t\t\tif (expr.arguments.length !== 1) return;\n\t\t\tconst param = parser.evaluateExpression(expr.arguments[0]);\n\t\t\tif (param.isConditional()) {\n\t\t\t\tfor (const option of param.options) {\n\t\t\t\t\tconst result = processItem(expr, option, weak);\n\t\t\t\t\tif (result === undefined) {\n\t\t\t\t\t\tprocessContext(expr, option, weak);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tconst dep = new RequireResolveHeaderDependency(expr.callee.range);\n\t\t\t\tdep.loc = expr.loc;\n\t\t\t\tparser.state.current.addDependency(dep);\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\tconst result = processItem(expr, param, weak);\n\t\t\t\tif (result === undefined) {\n\t\t\t\t\tprocessContext(expr, param, weak);\n\t\t\t\t}\n\t\t\t\tconst dep = new RequireResolveHeaderDependency(expr.callee.range);\n\t\t\t\tdep.loc = expr.loc;\n\t\t\t\tparser.state.current.addDependency(dep);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t};\n\t\tconst processItem = (expr, param, weak) => {\n\t\t\tif (param.isString()) {\n\t\t\t\tconst dep = new RequireResolveDependency(param.string, param.range);\n\t\t\t\tdep.loc = expr.loc;\n\t\t\t\tdep.optional = !!parser.scope.inTry;\n\t\t\t\tdep.weak = weak;\n\t\t\t\tparser.state.current.addDependency(dep);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t};\n\t\tconst processContext = (expr, param, weak) => {\n\t\t\tconst dep = ContextDependencyHelpers.create(\n\t\t\t\tRequireResolveContextDependency,\n\t\t\t\tparam.range,\n\t\t\t\tparam,\n\t\t\t\texpr,\n\t\t\t\toptions,\n\t\t\t\t{\n\t\t\t\t\tmode: weak ? \"weak\" : \"sync\"\n\t\t\t\t},\n\t\t\t\tparser\n\t\t\t);\n\t\t\tif (!dep) return;\n\t\t\tdep.loc = expr.loc;\n\t\t\tdep.optional = !!parser.scope.inTry;\n\t\t\tparser.state.current.addDependency(dep);\n\t\t\treturn true;\n\t\t};\n\n\t\tparser.hooks.call\n\t\t\t.for(\"require.resolve\")\n\t\t\t.tap(\"RequireResolveDependencyParserPlugin\", expr => {\n\t\t\t\treturn process(expr, false);\n\t\t\t});\n\t\tparser.hooks.call\n\t\t\t.for(\"require.resolveWeak\")\n\t\t\t.tap(\"RequireResolveDependencyParserPlugin\", expr => {\n\t\t\t\treturn process(expr, true);\n\t\t\t});\n\t}\n}\nmodule.exports = RequireResolveDependencyParserPlugin;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script"}