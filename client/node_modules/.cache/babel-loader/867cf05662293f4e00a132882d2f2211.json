{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nclass Semaphore {\n  /**\n   * Creates an instance of Semaphore.\n   *\n   * @param {number} available the amount available number of \"tasks\"\n   * in the Semaphore\n   */\n  constructor(available) {\n    this.available = available;\n    /** @type {(function(): void)[]} */\n    this.waiters = [];\n    /** @private */\n    this._continue = this._continue.bind(this);\n  }\n\n  /**\n   * @param {function(): void} callback function block to capture and run\n   * @returns {void}\n   */\n  acquire(callback) {\n    if (this.available > 0) {\n      this.available--;\n      callback();\n    } else {\n      this.waiters.push(callback);\n    }\n  }\n  release() {\n    this.available++;\n    if (this.waiters.length > 0) {\n      process.nextTick(this._continue);\n    }\n  }\n  _continue() {\n    if (this.available > 0) {\n      if (this.waiters.length > 0) {\n        this.available--;\n        const callback = this.waiters.pop();\n        callback();\n      }\n    }\n  }\n}\nmodule.exports = Semaphore;","map":{"version":3,"names":["Semaphore","constructor","available","waiters","_continue","bind","acquire","callback","push","release","length","process","nextTick","pop","module","exports"],"sources":["/home/soon/bulletin-board/node_modules/webpack/lib/util/Semaphore.js"],"sourcesContent":["/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nclass Semaphore {\n\t/**\n\t * Creates an instance of Semaphore.\n\t *\n\t * @param {number} available the amount available number of \"tasks\"\n\t * in the Semaphore\n\t */\n\tconstructor(available) {\n\t\tthis.available = available;\n\t\t/** @type {(function(): void)[]} */\n\t\tthis.waiters = [];\n\t\t/** @private */\n\t\tthis._continue = this._continue.bind(this);\n\t}\n\n\t/**\n\t * @param {function(): void} callback function block to capture and run\n\t * @returns {void}\n\t */\n\tacquire(callback) {\n\t\tif (this.available > 0) {\n\t\t\tthis.available--;\n\t\t\tcallback();\n\t\t} else {\n\t\t\tthis.waiters.push(callback);\n\t\t}\n\t}\n\n\trelease() {\n\t\tthis.available++;\n\t\tif (this.waiters.length > 0) {\n\t\t\tprocess.nextTick(this._continue);\n\t\t}\n\t}\n\n\t_continue() {\n\t\tif (this.available > 0) {\n\t\t\tif (this.waiters.length > 0) {\n\t\t\t\tthis.available--;\n\t\t\t\tconst callback = this.waiters.pop();\n\t\t\t\tcallback();\n\t\t\t}\n\t\t}\n\t}\n}\n\nmodule.exports = Semaphore;\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,YAAY;;AAEZ,MAAMA,SAAS,CAAC;EACf;AACD;AACA;AACA;AACA;AACA;EACCC,WAAWA,CAACC,SAAS,EAAE;IACtB,IAAI,CAACA,SAAS,GAAGA,SAAS;IAC1B;IACA,IAAI,CAACC,OAAO,GAAG,EAAE;IACjB;IACA,IAAI,CAACC,SAAS,GAAG,IAAI,CAACA,SAAS,CAACC,IAAI,CAAC,IAAI,CAAC;EAC3C;;EAEA;AACD;AACA;AACA;EACCC,OAAOA,CAACC,QAAQ,EAAE;IACjB,IAAI,IAAI,CAACL,SAAS,GAAG,CAAC,EAAE;MACvB,IAAI,CAACA,SAAS,EAAE;MAChBK,QAAQ,CAAC,CAAC;IACX,CAAC,MAAM;MACN,IAAI,CAACJ,OAAO,CAACK,IAAI,CAACD,QAAQ,CAAC;IAC5B;EACD;EAEAE,OAAOA,CAAA,EAAG;IACT,IAAI,CAACP,SAAS,EAAE;IAChB,IAAI,IAAI,CAACC,OAAO,CAACO,MAAM,GAAG,CAAC,EAAE;MAC5BC,OAAO,CAACC,QAAQ,CAAC,IAAI,CAACR,SAAS,CAAC;IACjC;EACD;EAEAA,SAASA,CAAA,EAAG;IACX,IAAI,IAAI,CAACF,SAAS,GAAG,CAAC,EAAE;MACvB,IAAI,IAAI,CAACC,OAAO,CAACO,MAAM,GAAG,CAAC,EAAE;QAC5B,IAAI,CAACR,SAAS,EAAE;QAChB,MAAMK,QAAQ,GAAG,IAAI,CAACJ,OAAO,CAACU,GAAG,CAAC,CAAC;QACnCN,QAAQ,CAAC,CAAC;MACX;IACD;EACD;AACD;AAEAO,MAAM,CAACC,OAAO,GAAGf,SAAS","ignoreList":[]},"metadata":{},"sourceType":"script"}