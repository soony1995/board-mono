{"ast":null,"code":"'use strict';\n\nmodule.exports = move;\nvar nodeFs = require('fs');\nvar rimraf = require('rimraf');\nvar validate = require('aproba');\nvar copy = require('copy-concurrently');\nvar RunQueue = require('run-queue');\nvar extend = Object.assign || require('util')._extend;\nfunction promisify(Promise, fn) {\n  return function () {\n    var args = [].slice.call(arguments);\n    return new Promise(function (resolve, reject) {\n      return fn.apply(null, args.concat(function (err, value) {\n        if (err) {\n          reject(err);\n        } else {\n          resolve(value);\n        }\n      }));\n    });\n  };\n}\nfunction move(from, to, opts) {\n  validate('SSO|SS', arguments);\n  opts = extend({}, opts || {});\n  var Promise = opts.Promise || global.Promise;\n  var fs = opts.fs || nodeFs;\n  var rimrafAsync = promisify(Promise, rimraf);\n  var renameAsync = promisify(Promise, fs.rename);\n  opts.top = from;\n  var queue = new RunQueue({\n    maxConcurrency: opts.maxConcurrency,\n    Promise: Promise\n  });\n  opts.queue = queue;\n  opts.recurseWith = rename;\n  queue.add(0, rename, [from, to, opts]);\n  return queue.run().then(function () {\n    return remove(from);\n  }, function (err) {\n    // if the target already exists don't clobber it\n    if (err.code === 'EEXIST' || err.code === 'EPERM') {\n      return passThroughError();\n    } else {\n      return remove(to).then(passThroughError, passThroughError);\n    }\n    function passThroughError() {\n      return Promise.reject(err);\n    }\n  });\n  function remove(target) {\n    var opts = {\n      unlink: fs.unlink,\n      chmod: fs.chmod,\n      stat: fs.stat,\n      lstat: fs.lstat,\n      rmdir: fs.rmdir,\n      readdir: fs.readdir,\n      glob: false\n    };\n    return rimrafAsync(target, opts);\n  }\n  function rename(from, to, opts, done) {\n    return renameAsync(from, to).catch(function (err) {\n      if (err.code !== 'EXDEV') {\n        return Promise.reject(err);\n      } else {\n        return remove(to).then(function () {\n          return copy.item(from, to, opts);\n        });\n      }\n    });\n  }\n}","map":{"version":3,"names":["module","exports","move","nodeFs","require","rimraf","validate","copy","RunQueue","extend","Object","assign","_extend","promisify","Promise","fn","args","slice","call","arguments","resolve","reject","apply","concat","err","value","from","to","opts","global","fs","rimrafAsync","renameAsync","rename","top","queue","maxConcurrency","recurseWith","add","run","then","remove","code","passThroughError","target","unlink","chmod","stat","lstat","rmdir","readdir","glob","done","catch","item"],"sources":["/home/soon/bulletin-board/node_modules/move-concurrently/move.js"],"sourcesContent":["'use strict'\nmodule.exports = move\n\nvar nodeFs = require('fs')\nvar rimraf = require('rimraf')\nvar validate = require('aproba')\nvar copy = require('copy-concurrently')\nvar RunQueue = require('run-queue')\nvar extend = Object.assign || require('util')._extend\n\nfunction promisify (Promise, fn) {\n  return function () {\n    var args = [].slice.call(arguments)\n    return new Promise(function (resolve, reject) {\n      return fn.apply(null, args.concat(function (err, value) {\n        if (err) {\n          reject(err)\n        } else {\n          resolve(value)\n        }\n      }))\n    })\n  }\n}\n\nfunction move (from, to, opts) {\n  validate('SSO|SS', arguments)\n  opts = extend({}, opts || {})\n\n  var Promise = opts.Promise || global.Promise\n  var fs = opts.fs || nodeFs\n  var rimrafAsync = promisify(Promise, rimraf)\n  var renameAsync = promisify(Promise, fs.rename)\n\n  opts.top = from\n\n  var queue = new RunQueue({\n    maxConcurrency: opts.maxConcurrency,\n    Promise: Promise\n  })\n  opts.queue = queue\n  opts.recurseWith = rename\n\n  queue.add(0, rename, [from, to, opts])\n\n  return queue.run().then(function () {\n    return remove(from)\n  }, function (err) {\n    // if the target already exists don't clobber it\n    if (err.code === 'EEXIST' || err.code === 'EPERM') {\n      return passThroughError()\n    } else {\n      return remove(to).then(passThroughError, passThroughError)\n    }\n    function passThroughError () {\n      return Promise.reject(err)\n    }\n  })\n\n  function remove (target) {\n    var opts = {\n      unlink: fs.unlink,\n      chmod: fs.chmod,\n      stat: fs.stat,\n      lstat: fs.lstat,\n      rmdir: fs.rmdir,\n      readdir: fs.readdir,\n      glob: false\n    }\n    return rimrafAsync(target, opts)\n  }\n\n  function rename (from, to, opts, done) {\n    return renameAsync(from, to).catch(function (err) {\n      if (err.code !== 'EXDEV') {\n        return Promise.reject(err)\n      } else {\n        return remove(to).then(function () {\n          return copy.item(from, to, opts)\n        })\n      }\n    })\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script"}