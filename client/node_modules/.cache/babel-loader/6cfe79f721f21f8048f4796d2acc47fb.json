{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst Template = require(\"./Template\");\nconst ConstDependency = require(\"./dependencies/ConstDependency\");\nconst ParserHelpers = require(\"./ParserHelpers\");\nconst NullFactory = require(\"./NullFactory\");\nconst REPLACEMENTS = {\n  // eslint-disable-next-line camelcase\n  __webpack_hash__: \"__webpack_require__.h\",\n  // eslint-disable-next-line camelcase\n  __webpack_chunkname__: \"__webpack_require__.cn\"\n};\nconst REPLACEMENT_TYPES = {\n  // eslint-disable-next-line camelcase\n  __webpack_hash__: \"string\",\n  // eslint-disable-next-line camelcase\n  __webpack_chunkname__: \"string\"\n};\nclass ExtendedAPIPlugin {\n  apply(compiler) {\n    compiler.hooks.compilation.tap(\"ExtendedAPIPlugin\", (compilation, {\n      normalModuleFactory\n    }) => {\n      compilation.dependencyFactories.set(ConstDependency, new NullFactory());\n      compilation.dependencyTemplates.set(ConstDependency, new ConstDependency.Template());\n      const mainTemplate = compilation.mainTemplate;\n      mainTemplate.hooks.requireExtensions.tap(\"ExtendedAPIPlugin\", (source, chunk, hash) => {\n        const buf = [source];\n        buf.push(\"\");\n        buf.push(\"// __webpack_hash__\");\n        buf.push(`${mainTemplate.requireFn}.h = ${JSON.stringify(hash)};`);\n        buf.push(\"\");\n        buf.push(\"// __webpack_chunkname__\");\n        buf.push(`${mainTemplate.requireFn}.cn = ${JSON.stringify(chunk.name)};`);\n        return Template.asString(buf);\n      });\n      mainTemplate.hooks.globalHash.tap(\"ExtendedAPIPlugin\", () => true);\n      const handler = (parser, parserOptions) => {\n        Object.keys(REPLACEMENTS).forEach(key => {\n          parser.hooks.expression.for(key).tap(\"ExtendedAPIPlugin\", ParserHelpers.toConstantDependencyWithWebpackRequire(parser, REPLACEMENTS[key]));\n          parser.hooks.evaluateTypeof.for(key).tap(\"ExtendedAPIPlugin\", ParserHelpers.evaluateToString(REPLACEMENT_TYPES[key]));\n        });\n      };\n      normalModuleFactory.hooks.parser.for(\"javascript/auto\").tap(\"ExtendedAPIPlugin\", handler);\n      normalModuleFactory.hooks.parser.for(\"javascript/dynamic\").tap(\"ExtendedAPIPlugin\", handler);\n      normalModuleFactory.hooks.parser.for(\"javascript/esm\").tap(\"ExtendedAPIPlugin\", handler);\n    });\n  }\n}\nmodule.exports = ExtendedAPIPlugin;","map":{"version":3,"names":["Template","require","ConstDependency","ParserHelpers","NullFactory","REPLACEMENTS","__webpack_hash__","__webpack_chunkname__","REPLACEMENT_TYPES","ExtendedAPIPlugin","apply","compiler","hooks","compilation","tap","normalModuleFactory","dependencyFactories","set","dependencyTemplates","mainTemplate","requireExtensions","source","chunk","hash","buf","push","requireFn","JSON","stringify","name","asString","globalHash","handler","parser","parserOptions","Object","keys","forEach","key","expression","for","toConstantDependencyWithWebpackRequire","evaluateTypeof","evaluateToString","module","exports"],"sources":["/home/soon/bulletin-board/node_modules/webpack/lib/ExtendedAPIPlugin.js"],"sourcesContent":["/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst Template = require(\"./Template\");\nconst ConstDependency = require(\"./dependencies/ConstDependency\");\nconst ParserHelpers = require(\"./ParserHelpers\");\nconst NullFactory = require(\"./NullFactory\");\n\nconst REPLACEMENTS = {\n\t// eslint-disable-next-line camelcase\n\t__webpack_hash__: \"__webpack_require__.h\",\n\t// eslint-disable-next-line camelcase\n\t__webpack_chunkname__: \"__webpack_require__.cn\"\n};\nconst REPLACEMENT_TYPES = {\n\t// eslint-disable-next-line camelcase\n\t__webpack_hash__: \"string\",\n\t// eslint-disable-next-line camelcase\n\t__webpack_chunkname__: \"string\"\n};\n\nclass ExtendedAPIPlugin {\n\tapply(compiler) {\n\t\tcompiler.hooks.compilation.tap(\n\t\t\t\"ExtendedAPIPlugin\",\n\t\t\t(compilation, { normalModuleFactory }) => {\n\t\t\t\tcompilation.dependencyFactories.set(ConstDependency, new NullFactory());\n\t\t\t\tcompilation.dependencyTemplates.set(\n\t\t\t\t\tConstDependency,\n\t\t\t\t\tnew ConstDependency.Template()\n\t\t\t\t);\n\n\t\t\t\tconst mainTemplate = compilation.mainTemplate;\n\t\t\t\tmainTemplate.hooks.requireExtensions.tap(\n\t\t\t\t\t\"ExtendedAPIPlugin\",\n\t\t\t\t\t(source, chunk, hash) => {\n\t\t\t\t\t\tconst buf = [source];\n\t\t\t\t\t\tbuf.push(\"\");\n\t\t\t\t\t\tbuf.push(\"// __webpack_hash__\");\n\t\t\t\t\t\tbuf.push(`${mainTemplate.requireFn}.h = ${JSON.stringify(hash)};`);\n\t\t\t\t\t\tbuf.push(\"\");\n\t\t\t\t\t\tbuf.push(\"// __webpack_chunkname__\");\n\t\t\t\t\t\tbuf.push(\n\t\t\t\t\t\t\t`${mainTemplate.requireFn}.cn = ${JSON.stringify(chunk.name)};`\n\t\t\t\t\t\t);\n\t\t\t\t\t\treturn Template.asString(buf);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\tmainTemplate.hooks.globalHash.tap(\"ExtendedAPIPlugin\", () => true);\n\n\t\t\t\tconst handler = (parser, parserOptions) => {\n\t\t\t\t\tObject.keys(REPLACEMENTS).forEach(key => {\n\t\t\t\t\t\tparser.hooks.expression\n\t\t\t\t\t\t\t.for(key)\n\t\t\t\t\t\t\t.tap(\n\t\t\t\t\t\t\t\t\"ExtendedAPIPlugin\",\n\t\t\t\t\t\t\t\tParserHelpers.toConstantDependencyWithWebpackRequire(\n\t\t\t\t\t\t\t\t\tparser,\n\t\t\t\t\t\t\t\t\tREPLACEMENTS[key]\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\tparser.hooks.evaluateTypeof\n\t\t\t\t\t\t\t.for(key)\n\t\t\t\t\t\t\t.tap(\n\t\t\t\t\t\t\t\t\"ExtendedAPIPlugin\",\n\t\t\t\t\t\t\t\tParserHelpers.evaluateToString(REPLACEMENT_TYPES[key])\n\t\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t};\n\n\t\t\t\tnormalModuleFactory.hooks.parser\n\t\t\t\t\t.for(\"javascript/auto\")\n\t\t\t\t\t.tap(\"ExtendedAPIPlugin\", handler);\n\t\t\t\tnormalModuleFactory.hooks.parser\n\t\t\t\t\t.for(\"javascript/dynamic\")\n\t\t\t\t\t.tap(\"ExtendedAPIPlugin\", handler);\n\t\t\t\tnormalModuleFactory.hooks.parser\n\t\t\t\t\t.for(\"javascript/esm\")\n\t\t\t\t\t.tap(\"ExtendedAPIPlugin\", handler);\n\t\t\t}\n\t\t);\n\t}\n}\n\nmodule.exports = ExtendedAPIPlugin;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script"}