{"ast":null,"code":"'use strict';\n\nconst BB = require('bluebird');\nconst figgyPudding = require('figgy-pudding');\nconst fixOwner = require('./fix-owner');\nconst path = require('path');\nconst rimraf = BB.promisify(require('rimraf'));\nconst uniqueFilename = require('unique-filename');\nconst TmpOpts = figgyPudding({\n  tmpPrefix: {}\n});\nmodule.exports.mkdir = mktmpdir;\nfunction mktmpdir(cache, opts) {\n  opts = TmpOpts(opts);\n  const tmpTarget = uniqueFilename(path.join(cache, 'tmp'), opts.tmpPrefix);\n  return fixOwner.mkdirfix(cache, tmpTarget).then(() => {\n    return tmpTarget;\n  });\n}\nmodule.exports.withTmp = withTmp;\nfunction withTmp(cache, opts, cb) {\n  if (!cb) {\n    cb = opts;\n    opts = null;\n  }\n  opts = TmpOpts(opts);\n  return BB.using(mktmpdir(cache, opts).disposer(rimraf), cb);\n}\nmodule.exports.fix = fixtmpdir;\nfunction fixtmpdir(cache) {\n  return fixOwner(cache, path.join(cache, 'tmp'));\n}","map":{"version":3,"names":["BB","require","figgyPudding","fixOwner","path","rimraf","promisify","uniqueFilename","TmpOpts","tmpPrefix","module","exports","mkdir","mktmpdir","cache","opts","tmpTarget","join","mkdirfix","then","withTmp","cb","using","disposer","fix","fixtmpdir"],"sources":["/home/soon/bulletin-board/node_modules/webpack/node_modules/cacache/lib/util/tmp.js"],"sourcesContent":["'use strict'\n\nconst BB = require('bluebird')\n\nconst figgyPudding = require('figgy-pudding')\nconst fixOwner = require('./fix-owner')\nconst path = require('path')\nconst rimraf = BB.promisify(require('rimraf'))\nconst uniqueFilename = require('unique-filename')\n\nconst TmpOpts = figgyPudding({\n  tmpPrefix: {}\n})\n\nmodule.exports.mkdir = mktmpdir\nfunction mktmpdir (cache, opts) {\n  opts = TmpOpts(opts)\n  const tmpTarget = uniqueFilename(path.join(cache, 'tmp'), opts.tmpPrefix)\n  return fixOwner.mkdirfix(cache, tmpTarget).then(() => {\n    return tmpTarget\n  })\n}\n\nmodule.exports.withTmp = withTmp\nfunction withTmp (cache, opts, cb) {\n  if (!cb) {\n    cb = opts\n    opts = null\n  }\n  opts = TmpOpts(opts)\n  return BB.using(mktmpdir(cache, opts).disposer(rimraf), cb)\n}\n\nmodule.exports.fix = fixtmpdir\nfunction fixtmpdir (cache) {\n  return fixOwner(cache, path.join(cache, 'tmp'))\n}\n"],"mappings":"AAAA,YAAY;;AAEZ,MAAMA,EAAE,GAAGC,OAAO,CAAC,UAAU,CAAC;AAE9B,MAAMC,YAAY,GAAGD,OAAO,CAAC,eAAe,CAAC;AAC7C,MAAME,QAAQ,GAAGF,OAAO,CAAC,aAAa,CAAC;AACvC,MAAMG,IAAI,GAAGH,OAAO,CAAC,MAAM,CAAC;AAC5B,MAAMI,MAAM,GAAGL,EAAE,CAACM,SAAS,CAACL,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC9C,MAAMM,cAAc,GAAGN,OAAO,CAAC,iBAAiB,CAAC;AAEjD,MAAMO,OAAO,GAAGN,YAAY,CAAC;EAC3BO,SAAS,EAAE,CAAC;AACd,CAAC,CAAC;AAEFC,MAAM,CAACC,OAAO,CAACC,KAAK,GAAGC,QAAQ;AAC/B,SAASA,QAAQA,CAAEC,KAAK,EAAEC,IAAI,EAAE;EAC9BA,IAAI,GAAGP,OAAO,CAACO,IAAI,CAAC;EACpB,MAAMC,SAAS,GAAGT,cAAc,CAACH,IAAI,CAACa,IAAI,CAACH,KAAK,EAAE,KAAK,CAAC,EAAEC,IAAI,CAACN,SAAS,CAAC;EACzE,OAAON,QAAQ,CAACe,QAAQ,CAACJ,KAAK,EAAEE,SAAS,CAAC,CAACG,IAAI,CAAC,MAAM;IACpD,OAAOH,SAAS;EAClB,CAAC,CAAC;AACJ;AAEAN,MAAM,CAACC,OAAO,CAACS,OAAO,GAAGA,OAAO;AAChC,SAASA,OAAOA,CAAEN,KAAK,EAAEC,IAAI,EAAEM,EAAE,EAAE;EACjC,IAAI,CAACA,EAAE,EAAE;IACPA,EAAE,GAAGN,IAAI;IACTA,IAAI,GAAG,IAAI;EACb;EACAA,IAAI,GAAGP,OAAO,CAACO,IAAI,CAAC;EACpB,OAAOf,EAAE,CAACsB,KAAK,CAACT,QAAQ,CAACC,KAAK,EAAEC,IAAI,CAAC,CAACQ,QAAQ,CAAClB,MAAM,CAAC,EAAEgB,EAAE,CAAC;AAC7D;AAEAX,MAAM,CAACC,OAAO,CAACa,GAAG,GAAGC,SAAS;AAC9B,SAASA,SAASA,CAAEX,KAAK,EAAE;EACzB,OAAOX,QAAQ,CAACW,KAAK,EAAEV,IAAI,CAACa,IAAI,CAACH,KAAK,EAAE,KAAK,CAAC,CAAC;AACjD","ignoreList":[]},"metadata":{},"sourceType":"script"}