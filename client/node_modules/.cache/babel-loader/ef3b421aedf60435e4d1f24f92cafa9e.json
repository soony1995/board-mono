{"ast":null,"code":"'use strict';\n\nconst processFn = (fn, options) => function (...args) {\n  const P = options.promiseModule;\n  return new P((resolve, reject) => {\n    if (options.multiArgs) {\n      args.push((...result) => {\n        if (options.errorFirst) {\n          if (result[0]) {\n            reject(result);\n          } else {\n            result.shift();\n            resolve(result);\n          }\n        } else {\n          resolve(result);\n        }\n      });\n    } else if (options.errorFirst) {\n      args.push((error, result) => {\n        if (error) {\n          reject(error);\n        } else {\n          resolve(result);\n        }\n      });\n    } else {\n      args.push(resolve);\n    }\n    fn.apply(this, args);\n  });\n};\nmodule.exports = (input, options) => {\n  options = Object.assign({\n    exclude: [/.+(Sync|Stream)$/],\n    errorFirst: true,\n    promiseModule: Promise\n  }, options);\n  const objType = typeof input;\n  if (!(input !== null && (objType === 'object' || objType === 'function'))) {\n    throw new TypeError(`Expected \\`input\\` to be a \\`Function\\` or \\`Object\\`, got \\`${input === null ? 'null' : objType}\\``);\n  }\n  const filter = key => {\n    const match = pattern => typeof pattern === 'string' ? key === pattern : pattern.test(key);\n    return options.include ? options.include.some(match) : !options.exclude.some(match);\n  };\n  let ret;\n  if (objType === 'function') {\n    ret = function (...args) {\n      return options.excludeMain ? input(...args) : processFn(input, options).apply(this, args);\n    };\n  } else {\n    ret = Object.create(Object.getPrototypeOf(input));\n  }\n  for (const key in input) {\n    // eslint-disable-line guard-for-in\n    const property = input[key];\n    ret[key] = typeof property === 'function' && filter(key) ? processFn(property, options) : property;\n  }\n  return ret;\n};","map":{"version":3,"names":["processFn","fn","options","args","P","promiseModule","resolve","reject","multiArgs","push","result","errorFirst","shift","error","apply","module","exports","input","Object","assign","exclude","Promise","objType","TypeError","filter","key","match","pattern","test","include","some","ret","excludeMain","create","getPrototypeOf","property"],"sources":["/home/soon/bulletin-board/node_modules/pify/index.js"],"sourcesContent":["'use strict';\n\nconst processFn = (fn, options) => function (...args) {\n\tconst P = options.promiseModule;\n\n\treturn new P((resolve, reject) => {\n\t\tif (options.multiArgs) {\n\t\t\targs.push((...result) => {\n\t\t\t\tif (options.errorFirst) {\n\t\t\t\t\tif (result[0]) {\n\t\t\t\t\t\treject(result);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult.shift();\n\t\t\t\t\t\tresolve(result);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tresolve(result);\n\t\t\t\t}\n\t\t\t});\n\t\t} else if (options.errorFirst) {\n\t\t\targs.push((error, result) => {\n\t\t\t\tif (error) {\n\t\t\t\t\treject(error);\n\t\t\t\t} else {\n\t\t\t\t\tresolve(result);\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\targs.push(resolve);\n\t\t}\n\n\t\tfn.apply(this, args);\n\t});\n};\n\nmodule.exports = (input, options) => {\n\toptions = Object.assign({\n\t\texclude: [/.+(Sync|Stream)$/],\n\t\terrorFirst: true,\n\t\tpromiseModule: Promise\n\t}, options);\n\n\tconst objType = typeof input;\n\tif (!(input !== null && (objType === 'object' || objType === 'function'))) {\n\t\tthrow new TypeError(`Expected \\`input\\` to be a \\`Function\\` or \\`Object\\`, got \\`${input === null ? 'null' : objType}\\``);\n\t}\n\n\tconst filter = key => {\n\t\tconst match = pattern => typeof pattern === 'string' ? key === pattern : pattern.test(key);\n\t\treturn options.include ? options.include.some(match) : !options.exclude.some(match);\n\t};\n\n\tlet ret;\n\tif (objType === 'function') {\n\t\tret = function (...args) {\n\t\t\treturn options.excludeMain ? input(...args) : processFn(input, options).apply(this, args);\n\t\t};\n\t} else {\n\t\tret = Object.create(Object.getPrototypeOf(input));\n\t}\n\n\tfor (const key in input) { // eslint-disable-line guard-for-in\n\t\tconst property = input[key];\n\t\tret[key] = typeof property === 'function' && filter(key) ? processFn(property, options) : property;\n\t}\n\n\treturn ret;\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script"}