{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Gajus Kuizinas @gajus\n*/\n\"use strict\";\n\nconst Ajv = require(\"ajv\");\nconst ajv = new Ajv({\n  errorDataPath: \"configuration\",\n  allErrors: true,\n  verbose: true\n});\nrequire(\"ajv-keywords\")(ajv, [\"instanceof\"]);\nrequire(\"../schemas/ajv.absolutePath\")(ajv);\nconst validateSchema = (schema, options) => {\n  if (Array.isArray(options)) {\n    const errors = options.map(options => validateObject(schema, options));\n    errors.forEach((list, idx) => {\n      const applyPrefix = err => {\n        err.dataPath = `[${idx}]${err.dataPath}`;\n        if (err.children) {\n          err.children.forEach(applyPrefix);\n        }\n      };\n      list.forEach(applyPrefix);\n    });\n    return errors.reduce((arr, items) => {\n      return arr.concat(items);\n    }, []);\n  } else {\n    return validateObject(schema, options);\n  }\n};\nconst validateObject = (schema, options) => {\n  const validate = ajv.compile(schema);\n  const valid = validate(options);\n  return valid ? [] : filterErrors(validate.errors);\n};\nconst filterErrors = errors => {\n  let newErrors = [];\n  for (const err of errors) {\n    const dataPath = err.dataPath;\n    let children = [];\n    newErrors = newErrors.filter(oldError => {\n      if (oldError.dataPath.includes(dataPath)) {\n        if (oldError.children) {\n          children = children.concat(oldError.children.slice(0));\n        }\n        oldError.children = undefined;\n        children.push(oldError);\n        return false;\n      }\n      return true;\n    });\n    if (children.length) {\n      err.children = children;\n    }\n    newErrors.push(err);\n  }\n  return newErrors;\n};\nmodule.exports = validateSchema;","map":{"version":3,"names":["Ajv","require","ajv","errorDataPath","allErrors","verbose","validateSchema","schema","options","Array","isArray","errors","map","validateObject","forEach","list","idx","applyPrefix","err","dataPath","children","reduce","arr","items","concat","validate","compile","valid","filterErrors","newErrors","filter","oldError","includes","slice","undefined","push","length","module","exports"],"sources":["/home/soon/bulletin-board/node_modules/webpack/lib/validateSchema.js"],"sourcesContent":["/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Gajus Kuizinas @gajus\n*/\n\"use strict\";\n\nconst Ajv = require(\"ajv\");\nconst ajv = new Ajv({\n\terrorDataPath: \"configuration\",\n\tallErrors: true,\n\tverbose: true\n});\nrequire(\"ajv-keywords\")(ajv, [\"instanceof\"]);\nrequire(\"../schemas/ajv.absolutePath\")(ajv);\n\nconst validateSchema = (schema, options) => {\n\tif (Array.isArray(options)) {\n\t\tconst errors = options.map(options => validateObject(schema, options));\n\t\terrors.forEach((list, idx) => {\n\t\t\tconst applyPrefix = err => {\n\t\t\t\terr.dataPath = `[${idx}]${err.dataPath}`;\n\t\t\t\tif (err.children) {\n\t\t\t\t\terr.children.forEach(applyPrefix);\n\t\t\t\t}\n\t\t\t};\n\t\t\tlist.forEach(applyPrefix);\n\t\t});\n\t\treturn errors.reduce((arr, items) => {\n\t\t\treturn arr.concat(items);\n\t\t}, []);\n\t} else {\n\t\treturn validateObject(schema, options);\n\t}\n};\n\nconst validateObject = (schema, options) => {\n\tconst validate = ajv.compile(schema);\n\tconst valid = validate(options);\n\treturn valid ? [] : filterErrors(validate.errors);\n};\n\nconst filterErrors = errors => {\n\tlet newErrors = [];\n\tfor (const err of errors) {\n\t\tconst dataPath = err.dataPath;\n\t\tlet children = [];\n\t\tnewErrors = newErrors.filter(oldError => {\n\t\t\tif (oldError.dataPath.includes(dataPath)) {\n\t\t\t\tif (oldError.children) {\n\t\t\t\t\tchildren = children.concat(oldError.children.slice(0));\n\t\t\t\t}\n\t\t\t\toldError.children = undefined;\n\t\t\t\tchildren.push(oldError);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t});\n\t\tif (children.length) {\n\t\t\terr.children = children;\n\t\t}\n\t\tnewErrors.push(err);\n\t}\n\n\treturn newErrors;\n};\n\nmodule.exports = validateSchema;\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,YAAY;;AAEZ,MAAMA,GAAG,GAAGC,OAAO,CAAC,KAAK,CAAC;AAC1B,MAAMC,GAAG,GAAG,IAAIF,GAAG,CAAC;EACnBG,aAAa,EAAE,eAAe;EAC9BC,SAAS,EAAE,IAAI;EACfC,OAAO,EAAE;AACV,CAAC,CAAC;AACFJ,OAAO,CAAC,cAAc,CAAC,CAACC,GAAG,EAAE,CAAC,YAAY,CAAC,CAAC;AAC5CD,OAAO,CAAC,6BAA6B,CAAC,CAACC,GAAG,CAAC;AAE3C,MAAMI,cAAc,GAAGA,CAACC,MAAM,EAAEC,OAAO,KAAK;EAC3C,IAAIC,KAAK,CAACC,OAAO,CAACF,OAAO,CAAC,EAAE;IAC3B,MAAMG,MAAM,GAAGH,OAAO,CAACI,GAAG,CAACJ,OAAO,IAAIK,cAAc,CAACN,MAAM,EAAEC,OAAO,CAAC,CAAC;IACtEG,MAAM,CAACG,OAAO,CAAC,CAACC,IAAI,EAAEC,GAAG,KAAK;MAC7B,MAAMC,WAAW,GAAGC,GAAG,IAAI;QAC1BA,GAAG,CAACC,QAAQ,GAAG,IAAIH,GAAG,IAAIE,GAAG,CAACC,QAAQ,EAAE;QACxC,IAAID,GAAG,CAACE,QAAQ,EAAE;UACjBF,GAAG,CAACE,QAAQ,CAACN,OAAO,CAACG,WAAW,CAAC;QAClC;MACD,CAAC;MACDF,IAAI,CAACD,OAAO,CAACG,WAAW,CAAC;IAC1B,CAAC,CAAC;IACF,OAAON,MAAM,CAACU,MAAM,CAAC,CAACC,GAAG,EAAEC,KAAK,KAAK;MACpC,OAAOD,GAAG,CAACE,MAAM,CAACD,KAAK,CAAC;IACzB,CAAC,EAAE,EAAE,CAAC;EACP,CAAC,MAAM;IACN,OAAOV,cAAc,CAACN,MAAM,EAAEC,OAAO,CAAC;EACvC;AACD,CAAC;AAED,MAAMK,cAAc,GAAGA,CAACN,MAAM,EAAEC,OAAO,KAAK;EAC3C,MAAMiB,QAAQ,GAAGvB,GAAG,CAACwB,OAAO,CAACnB,MAAM,CAAC;EACpC,MAAMoB,KAAK,GAAGF,QAAQ,CAACjB,OAAO,CAAC;EAC/B,OAAOmB,KAAK,GAAG,EAAE,GAAGC,YAAY,CAACH,QAAQ,CAACd,MAAM,CAAC;AAClD,CAAC;AAED,MAAMiB,YAAY,GAAGjB,MAAM,IAAI;EAC9B,IAAIkB,SAAS,GAAG,EAAE;EAClB,KAAK,MAAMX,GAAG,IAAIP,MAAM,EAAE;IACzB,MAAMQ,QAAQ,GAAGD,GAAG,CAACC,QAAQ;IAC7B,IAAIC,QAAQ,GAAG,EAAE;IACjBS,SAAS,GAAGA,SAAS,CAACC,MAAM,CAACC,QAAQ,IAAI;MACxC,IAAIA,QAAQ,CAACZ,QAAQ,CAACa,QAAQ,CAACb,QAAQ,CAAC,EAAE;QACzC,IAAIY,QAAQ,CAACX,QAAQ,EAAE;UACtBA,QAAQ,GAAGA,QAAQ,CAACI,MAAM,CAACO,QAAQ,CAACX,QAAQ,CAACa,KAAK,CAAC,CAAC,CAAC,CAAC;QACvD;QACAF,QAAQ,CAACX,QAAQ,GAAGc,SAAS;QAC7Bd,QAAQ,CAACe,IAAI,CAACJ,QAAQ,CAAC;QACvB,OAAO,KAAK;MACb;MACA,OAAO,IAAI;IACZ,CAAC,CAAC;IACF,IAAIX,QAAQ,CAACgB,MAAM,EAAE;MACpBlB,GAAG,CAACE,QAAQ,GAAGA,QAAQ;IACxB;IACAS,SAAS,CAACM,IAAI,CAACjB,GAAG,CAAC;EACpB;EAEA,OAAOW,SAAS;AACjB,CAAC;AAEDQ,MAAM,CAACC,OAAO,GAAGhC,cAAc","ignoreList":[]},"metadata":{},"sourceType":"script"}