{"ast":null,"code":"'use strict';\n\nconst Farm = require('./farm');\nlet farms = []; // keep record of farms so we can end() them if required\n\nfunction farm(options, path, methods) {\n  if (typeof options == 'string') {\n    methods = path;\n    path = options;\n    options = {};\n  }\n  let f = new Farm(options, path),\n    api = f.setup(methods);\n  farms.push({\n    farm: f,\n    api: api\n  });\n\n  // return the public API\n  return api;\n}\nfunction end(api, callback) {\n  for (let i = 0; i < farms.length; i++) if (farms[i] && farms[i].api === api) return farms[i].farm.end(callback);\n  process.nextTick(callback.bind(null, new Error('Worker farm not found!')));\n}\nmodule.exports = farm;\nmodule.exports.end = end;","map":{"version":3,"names":["Farm","require","farms","farm","options","path","methods","f","api","setup","push","end","callback","i","length","process","nextTick","bind","Error","module","exports"],"sources":["/home/soon/bulletin-board/node_modules/worker-farm/lib/index.js"],"sourcesContent":["'use strict'\n\nconst Farm = require('./farm')\n\nlet farms = [] // keep record of farms so we can end() them if required\n\n\nfunction farm (options, path, methods) {\n  if (typeof options == 'string') {\n    methods = path\n    path = options\n    options = {}\n  }\n\n  let f   = new Farm(options, path)\n    , api = f.setup(methods)\n\n  farms.push({ farm: f, api: api })\n\n  // return the public API\n  return api\n}\n\n\nfunction end (api, callback) {\n  for (let i = 0; i < farms.length; i++)\n    if (farms[i] && farms[i].api === api)\n      return farms[i].farm.end(callback)\n  process.nextTick(callback.bind(null, new Error('Worker farm not found!')))\n}\n\n\nmodule.exports     = farm\nmodule.exports.end = end\n"],"mappings":"AAAA,YAAY;;AAEZ,MAAMA,IAAI,GAAGC,OAAO,CAAC,QAAQ,CAAC;AAE9B,IAAIC,KAAK,GAAG,EAAE,EAAC;;AAGf,SAASC,IAAIA,CAAEC,OAAO,EAAEC,IAAI,EAAEC,OAAO,EAAE;EACrC,IAAI,OAAOF,OAAO,IAAI,QAAQ,EAAE;IAC9BE,OAAO,GAAGD,IAAI;IACdA,IAAI,GAAGD,OAAO;IACdA,OAAO,GAAG,CAAC,CAAC;EACd;EAEA,IAAIG,CAAC,GAAK,IAAIP,IAAI,CAACI,OAAO,EAAEC,IAAI,CAAC;IAC7BG,GAAG,GAAGD,CAAC,CAACE,KAAK,CAACH,OAAO,CAAC;EAE1BJ,KAAK,CAACQ,IAAI,CAAC;IAAEP,IAAI,EAAEI,CAAC;IAAEC,GAAG,EAAEA;EAAI,CAAC,CAAC;;EAEjC;EACA,OAAOA,GAAG;AACZ;AAGA,SAASG,GAAGA,CAAEH,GAAG,EAAEI,QAAQ,EAAE;EAC3B,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGX,KAAK,CAACY,MAAM,EAAED,CAAC,EAAE,EACnC,IAAIX,KAAK,CAACW,CAAC,CAAC,IAAIX,KAAK,CAACW,CAAC,CAAC,CAACL,GAAG,KAAKA,GAAG,EAClC,OAAON,KAAK,CAACW,CAAC,CAAC,CAACV,IAAI,CAACQ,GAAG,CAACC,QAAQ,CAAC;EACtCG,OAAO,CAACC,QAAQ,CAACJ,QAAQ,CAACK,IAAI,CAAC,IAAI,EAAE,IAAIC,KAAK,CAAC,wBAAwB,CAAC,CAAC,CAAC;AAC5E;AAGAC,MAAM,CAACC,OAAO,GAAOjB,IAAI;AACzBgB,MAAM,CAACC,OAAO,CAACT,GAAG,GAAGA,GAAG","ignoreList":[]},"metadata":{},"sourceType":"script"}